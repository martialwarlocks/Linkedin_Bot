{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{Send,Bot,User,Linkedin,Video,FileText,Database,TrendingUp,Users,Lightbulb,Copy,Settings,Plus,Trash2,Edit3,Save,X,Search,BookOpen,UserPlus,ChevronLeft,ChevronRight,Upload,Globe,AlertCircle,CheckCircle,Clock}from'lucide-react';// ðŸ”§ CONFIGURATION - UPDATE THIS WITH YOUR BACKEND URL\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BACKEND_CONFIG={// ðŸš¨ CHANGE THIS TO YOUR DEPLOYED BACKEND URL\nurl:'http://localhost:8000'// Replace with your Cloud Run URL\n// For local development, use: 'http://localhost:8000'\n// For production, use: 'https://your-service-name-project-id.region.run.app'\n};// Cloud Document Manager - Updated to match your backend API\nconst createCloudDocumentManager=()=>{const BACKEND_URL=BACKEND_CONFIG.url;return{// Upload document to cloud storage\nuploadDocument:async file=>{try{const formData=new FormData();formData.append('file',file);const response=await fetch(`${BACKEND_URL}/upload`,{method:'POST',body:formData});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.detail||`Upload failed: ${response.status}`);}return await response.json();}catch(error){console.error('Cloud upload error:',error);throw error;}},// Get all documents from cloud storage\ngetDocuments:async()=>{try{const response=await fetch(`${BACKEND_URL}/documents`);if(!response.ok){throw new Error(`Get documents failed: ${response.status}`);}return await response.json();}catch(error){console.error('Cloud get documents error:',error);throw error;}},// Delete document from cloud storage\ndeleteDocument:async filename=>{try{const response=await fetch(`${BACKEND_URL}/documents/${encodeURIComponent(filename)}`,{method:'DELETE'});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.detail||`Delete failed: ${response.status}`);}return await response.json();}catch(error){console.error('Cloud delete error:',error);throw error;}},// Ask questions using the backend's /ask endpoint\naskQuestion:async question=>{try{const response=await fetch(`${BACKEND_URL}/ask`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({question})});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.detail||`Ask failed: ${response.status}`);}return await response.json();}catch(error){console.error('Cloud ask error:',error);throw error;}},// Crawl website and store in cloud\ncrawlWebsite:async url=>{try{const response=await fetch(`${BACKEND_URL}/crawl`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({url})});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.detail||`Crawl failed: ${response.status}`);}return await response.json();}catch(error){console.error('Cloud crawl error:',error);throw error;}},// Get all chunks from backend\ngetAllChunks:async()=>{try{const response=await fetch(`${BACKEND_URL}/chunks`);if(!response.ok){throw new Error(`Get chunks failed: ${response.status}`);}return await response.json();}catch(error){console.error('Get chunks error:',error);return[];}},// Refresh index\nrefreshIndex:async()=>{try{const response=await fetch(`${BACKEND_URL}/refresh`,{method:'POST'});if(!response.ok){throw new Error(`Refresh failed: ${response.status}`);}return await response.json();}catch(error){console.error('Refresh error:',error);throw error;}},// Health check\nhealthCheck:async()=>{try{const response=await fetch(`${BACKEND_URL}/`);return await response.json();}catch(error){console.error('Health check error:',error);return{status:'offline'};}}};};// In-memory storage for configuration (instead of localStorage)\nlet configStore={openaiApiKey:'',model:'gpt-4',supabaseUrl:'',supabaseKey:''};// Supabase client initialization\nconst createSupabaseClient=()=>{const supabaseUrl=configStore.supabaseUrl||'';const supabaseKey=configStore.supabaseKey||'';if(!supabaseUrl||!supabaseKey){return null;}return{from:table=>({select:async function(){let columns=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'*';try{const response=await fetch(`${supabaseUrl}/rest/v1/${table}?select=${columns}&order=created_at.desc`,{headers:{'apikey':supabaseKey,'Authorization':`Bearer ${supabaseKey}`,'Content-Type':'application/json','Prefer':'return=representation'}});const data=await response.json();return{data,error:null};}catch(error){return{data:null,error};}},insert:async data=>{try{const response=await fetch(`${supabaseUrl}/rest/v1/${table}`,{method:'POST',headers:{'apikey':supabaseKey,'Authorization':`Bearer ${supabaseKey}`,'Content-Type':'application/json','Prefer':'return=representation'},body:JSON.stringify(data)});const result=await response.json();return{data:result,error:null};}catch(error){return{data:null,error};}},update:async data=>({eq:async(column,value)=>{try{const response=await fetch(`${supabaseUrl}/rest/v1/${table}?${column}=eq.${value}`,{method:'PATCH',headers:{'apikey':supabaseKey,'Authorization':`Bearer ${supabaseKey}`,'Content-Type':'application/json','Prefer':'return=representation'},body:JSON.stringify(data)});if(!response.ok){const errorData=await response.json();return{data:null,error:errorData};}const result=await response.json();return{data:result,error:null};}catch(error){return{data:null,error};}}}),delete:async()=>({eq:(column,value)=>{return fetch(`${supabaseUrl}/rest/v1/${table}?${column}=eq.${value}`,{method:'DELETE',headers:{'apikey':supabaseKey,'Authorization':`Bearer ${supabaseKey}`,'Content-Type':'application/json'}}).then(()=>({data:null,error:null})).catch(error=>({data:null,error}));}})})};};const LinkedInContentBot=()=>{const[activeTab,setActiveTab]=useState('chat');const[messages,setMessages]=useState([{id:1,type:'bot',text:\"Welcome to the LinkedIn Content Creator Assistant with Cloud Document Integration! I can now access your uploaded documents and crawled websites to create better content. How can I assist you today?\",timestamp:new Date()}]);const[isTyping,setIsTyping]=useState(false);const[showConfig,setShowConfig]=useState(false);const[config,setConfig]=useState(configStore);const[generatedContent,setGeneratedContent]=useState(null);const[selectedOptions,setSelectedOptions]=useState({linkedinPost:0,videoScript:0});const messagesEndRef=useRef(null);// Backend connection state\nconst[backendStatus,setBackendStatus]=useState('checking');const[backendError,setBackendError]=useState(null);// Database states\nconst[researchDatabase,setResearchDatabase]=useState([]);const[creatorDatabase,setCreatorDatabase]=useState([{id:1,name:\"Gary Vaynerchuk\",key:\"gary-v\",icon:TrendingUp,style:{tone:'Direct, passionate, no-nonsense',structure:'Hook â†’ Personal story â†’ Business insight â†’ Call to action',language:'Casual, uses \"you guys\", lots of energy',length:'Medium to long posts',hooks:['Look...','Here\\'s the thing...','Real talk...'],endings:['What do you think?','Let me know in the comments','DM me your thoughts'],characteristics:'High energy, direct approach, business-focused, motivational'}},{id:2,name:\"Simon Sinek\",key:\"simon-sinek\",icon:Users,style:{tone:'Inspirational, thoughtful, leader-focused',structure:'Question â†’ Story/Example â†’ Leadership lesson â†’ Reflection',language:'Professional but warm, thought-provoking',length:'Medium posts with clear paragraphs',hooks:['Why is it that...','The best leaders...','I once worked with...'],endings:['What would you do?','Leadership is a choice','The choice is yours'],characteristics:'Leadership-focused, inspirational, storytelling, thoughtful questions'}},{id:3,name:\"Seth Godin\",key:\"seth-godin\",icon:Lightbulb,style:{tone:'Wise, concise, marketing-focused',structure:'Insight â†’ Brief explanation â†’ Broader implication',language:'Concise, profound, marketing terminology',length:'Short, punchy posts',hooks:['The thing is...','Here\\'s what I learned...','Marketing is...'],endings:['Worth considering.','Just saying.','Think about it.'],characteristics:'Concise wisdom, marketing insights, thought-provoking, minimal but impactful'}}]);const[promptHistory,setPromptHistory]=useState([]);const[supabaseClient,setSupabaseClient]=useState(null);const[documentManager,setDocumentManager]=useState(null);const[isLoadingResearch,setIsLoadingResearch]=useState(false);const[customDocuments,setCustomDocuments]=useState([]);const[isLoadingDocuments,setIsLoadingDocuments]=useState(false);const[editingResearch,setEditingResearch]=useState(null);const[editingCreator,setEditingCreator]=useState(null);const[selectedFile,setSelectedFile]=useState(null);const[isUploadingDocument,setIsUploadingDocument]=useState(false);// Test backend connection function\nconst testBackendConnection=async()=>{setBackendStatus('checking');setBackendError(null);try{if(!documentManager){throw new Error('Document manager not initialized');}const health=await documentManager.healthCheck();console.log('Backend health check:',health);if(health.status&&health.status.includes('online')){setBackendStatus('connected');// Load documents after successful connection\nconst documents=await documentManager.getDocuments();setCustomDocuments(documents||[]);}else{throw new Error('Backend health check failed');}}catch(error){console.error('Backend connection failed:',error);setBackendStatus('error');setBackendError(error.message);}};// Backend Status Component\nconst BackendStatus=()=>/*#__PURE__*/_jsxs(\"div\",{className:`p-3 rounded-lg mb-4 flex items-center gap-2 ${backendStatus==='connected'?'bg-green-50 border border-green-200':backendStatus==='error'?'bg-red-50 border border-red-200':'bg-yellow-50 border border-yellow-200'}`,children:[backendStatus==='connected'&&/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4 text-green-600\"}),backendStatus==='error'&&/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 text-red-600\"}),backendStatus==='checking'&&/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4 text-yellow-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:`text-sm font-medium ${backendStatus==='connected'?'text-green-800':backendStatus==='error'?'text-red-800':'text-yellow-800'}`,children:[\"Backend: \",backendStatus==='connected'?'Connected':backendStatus==='error'?'Disconnected':'Checking...']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600\",children:[\"URL: \",BACKEND_CONFIG.url]}),backendError&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-red-600 mt-1\",children:[\"Error: \",backendError]})]}),backendStatus==='error'&&/*#__PURE__*/_jsx(\"button\",{onClick:testBackendConnection,className:\"text-xs px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200\",children:\"Retry\"})]});// Enhanced Content Generation with Cloud Document Manager\nconst generateContentWithCloudDocuments=async(prompt,creatorStyle,relevantResearch)=>{if(!documentManager){throw new Error('Document manager not initialized');}try{// Use the backend's /ask endpoint to get relevant information\nconst askResult=await documentManager.askQuestion(prompt);// Combine research data with backend search results\nconst researchContext=relevantResearch.map((r,index)=>`\n${index+1}. Topic: ${r.topic}\n   Findings: ${r.findings}\n   Data: ${r.data}\n   Source: ${r.source}\n   Date Added: ${r.dateAdded.toLocaleDateString()}\n   ${r.relevanceScore?`Relevance Score: ${r.relevanceScore.toFixed(1)}`:''}\n`).join('\\n');// Add backend search results as context\nconst backendContext=askResult.answer?`\nBackend Document Search Results:\nAnswer: ${askResult.answer}\n\nSources: ${askResult.sources.map(s=>s.filename).join(', ')}\n\nFollow-up Suggestions: ${askResult.sales_followups.concat(askResult.client_followups).join(', ')}\n`:'';// Create enhanced prompt with both research and backend context\nconst enhancedPrompt=`Create LinkedIn content in the style of ${creatorStyle.name}.\n\nCreator Style:\n- Tone: ${creatorStyle.style.tone}\n- Structure: ${creatorStyle.style.structure}\n- Language: ${creatorStyle.style.language}\n- Length: ${creatorStyle.style.length}\n- Common hooks: ${creatorStyle.style.hooks.join(', ')}\n- Common endings: ${creatorStyle.style.endings.join(', ')}\n- Key characteristics: ${creatorStyle.style.characteristics}\n\nResearch Context:\n${researchContext}\n\n${backendContext}\n\nCRITICAL INSTRUCTION: Use information from ALL ${relevantResearch.length} research items and the backend search results provided above. Combine insights from multiple sources and reference specific data points.\n\nUser Request: ${prompt}\n\nCreate TWO DIFFERENT variations each for LinkedIn posts and video scripts. Return in JSON format:\n{\n  \"linkedinPosts\": [\"first post variation\", \"second post variation\"],\n  \"videoScripts\": [\"first video script variation\", \"second video script variation\"],\n  \"hashtags\": [\"array\", \"of\", \"hashtags\"],\n  \"engagement_tips\": [\"array\", \"of\", \"tips\"]\n}`;// Use OpenAI with enhanced context\nconst response=await fetch('https://api.openai.com/v1/chat/completions',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${config.openaiApiKey}`},body:JSON.stringify({model:config.model,messages:[{role:'system',content:enhancedPrompt},{role:'user',content:prompt}],temperature:0.8,max_tokens:3000})});if(!response.ok){var _errorData$error;const errorData=await response.json();throw new Error(`OpenAI API error: ${((_errorData$error=errorData.error)===null||_errorData$error===void 0?void 0:_errorData$error.message)||response.status}`);}const data=await response.json();const content=JSON.parse(data.choices[0].message.content);// Save prompt to history with backend sources\nsetPromptHistory(prev=>[{id:Date.now(),prompt,creator:creatorStyle.name,research:relevantResearch.map(r=>r.topic),timestamp:new Date(),response:content,backendSources:askResult.sources||[],backendAnswer:askResult.answer||null},...prev]);return content;}catch(error){console.error('Enhanced content generation error:',error);throw error;}};// OpenAI Integration for multiple variations (fallback)\nconst generateContentWithOpenAI=async(prompt,creatorStyle,relevantResearch)=>{if(!config.openaiApiKey){throw new Error('OpenAI API key not configured');}const systemPrompt=`You are a LinkedIn content creator that mimics the style of ${creatorStyle.name}. \n\nStyle characteristics:\n- Tone: ${creatorStyle.style.tone}\n- Structure: ${creatorStyle.style.structure}\n- Language: ${creatorStyle.style.language}\n- Length: ${creatorStyle.style.length}\n- Common hooks: ${creatorStyle.style.hooks.join(', ')}\n- Common endings: ${creatorStyle.style.endings.join(', ')}\n- Key characteristics: ${creatorStyle.style.characteristics}\n\nResearch data to incorporate (prioritized by relevance and recency):\n${relevantResearch.map((r,index)=>`\n${index+1}. Topic: ${r.topic}\n   Findings: ${r.findings}\n   Data: ${r.data}\n   Source: ${r.source}\n   Date Added: ${r.dateAdded.toLocaleDateString()}\n   ${r.relevanceScore?`Relevance Score: ${r.relevanceScore.toFixed(1)}`:''}\n`).join('\\n')}\n\nCRITICAL INSTRUCTION: You MUST use information from ALL ${relevantResearch.length} research items provided above. Do NOT focus on just one research item. Your task is to:\n\n1. COMBINE insights from multiple research sources\n2. Reference specific data points from different research items\n3. Weave together findings from various topics\n4. Create comprehensive content that draws from the full research database\n\nFor each variation, explicitly reference at least 2-3 different research items by topic or source. Make the content richer by connecting insights across multiple research areas.\n\nCreate TWO DIFFERENT variations each for LinkedIn posts and video scripts that incorporate this research data in the creator's authentic style. Make sure each variation is distinct in approach while maintaining the creator's voice.\n\nReturn your response in this JSON format:\n{\n  \"linkedinPosts\": [\"first post variation\", \"second post variation\"],\n  \"videoScripts\": [\"first video script variation\", \"second video script variation\"],\n  \"hashtags\": [\"array\", \"of\", \"hashtags\"],\n  \"engagement_tips\": [\"array\", \"of\", \"tips\"]\n}`;try{const response=await fetch('https://api.openai.com/v1/chat/completions',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${config.openaiApiKey}`},body:JSON.stringify({model:config.model,messages:[{role:'system',content:systemPrompt},{role:'user',content:prompt}],temperature:0.8,max_tokens:3000})});if(!response.ok){var _errorData$error2;const errorData=await response.json();throw new Error(`OpenAI API error: ${((_errorData$error2=errorData.error)===null||_errorData$error2===void 0?void 0:_errorData$error2.message)||response.status}`);}const data=await response.json();const content=JSON.parse(data.choices[0].message.content);// Save prompt to history\nsetPromptHistory(prev=>[{id:Date.now(),prompt,creator:creatorStyle.name,research:relevantResearch.map(r=>r.topic),timestamp:new Date(),response:content},...prev]);return content;}catch(error){console.error('OpenAI API error:',error);throw error;}};const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(()=>{scrollToBottom();},[messages]);// Initialize Supabase client\nuseEffect(()=>{if(config.supabaseUrl&&config.supabaseKey){const client=createSupabaseClient();setSupabaseClient(client);const loadResearch=async()=>{if(!client)return;setIsLoadingResearch(true);try{const{data,error}=await client.from('research').select('*');if(error)throw error;const sortedData=data.map(item=>({...item,tags:typeof item.tags==='string'?item.tags.split(',').map(t=>t.trim()):item.tags||[],dateAdded:new Date(item.created_at||item.dateAdded)})).sort((a,b)=>new Date(b.dateAdded)-new Date(a.dateAdded));setResearchDatabase(sortedData);}catch(error){console.error('Error loading research:',error);}finally{setIsLoadingResearch(false);}};loadResearch();}},[config.supabaseUrl,config.supabaseKey]);// Initialize Cloud Document Manager and test connection\nuseEffect(()=>{const manager=createCloudDocumentManager();setDocumentManager(manager);// Test backend connection on startup\nconst initializeBackend=async()=>{setBackendStatus('checking');setBackendError(null);try{const health=await manager.healthCheck();console.log('Backend health check:',health);if(health.status&&health.status.includes('online')){setBackendStatus('connected');// Load documents after successful connection\nsetIsLoadingDocuments(true);try{const documents=await manager.getDocuments();setCustomDocuments(documents||[]);}catch(docError){console.error('Error loading documents:',docError);setCustomDocuments([]);}finally{setIsLoadingDocuments(false);}}else{throw new Error('Backend health check failed');}}catch(error){console.error('Backend connection failed:',error);setBackendStatus('error');setBackendError(error.message);setCustomDocuments([]);}};initializeBackend();},[]);const loadResearchFromSupabase=async function(){let client=arguments.length>0&&arguments[0]!==undefined?arguments[0]:supabaseClient;if(!client)return;setIsLoadingResearch(true);try{const{data,error}=await client.from('research').select('*');if(error)throw error;const sortedData=data.map(item=>({...item,tags:typeof item.tags==='string'?item.tags.split(',').map(t=>t.trim()):item.tags||[],dateAdded:new Date(item.created_at||item.dateAdded)})).sort((a,b)=>new Date(b.dateAdded)-new Date(a.dateAdded));setResearchDatabase(sortedData);}catch(error){console.error('Error loading research:',error);}finally{setIsLoadingResearch(false);}};const deleteResearch=async id=>{if(supabaseClient){try{const{error}=await supabaseClient.from('research').delete().eq('id',id);if(error)throw error;await loadResearchFromSupabase();}catch(error){console.error('Error deleting research:',error);setResearchDatabase(prev=>prev.filter(item=>item.id!==id));}}else{setResearchDatabase(prev=>prev.filter(item=>item.id!==id));}};const updateResearch=async(id,updatedData)=>{const updated={topic:updatedData.topic,findings:updatedData.findings,source:updatedData.source,data:updatedData.data,tags:typeof updatedData.tags==='string'?updatedData.tags.split(',').map(tag=>tag.trim()).filter(tag=>tag).join(','):Array.isArray(updatedData.tags)?updatedData.tags.join(','):updatedData.tags};setResearchDatabase(prev=>prev.map(item=>item.id===id?{...item,topic:updatedData.topic,findings:updatedData.findings,source:updatedData.source,data:updatedData.data,tags:typeof updatedData.tags==='string'?updatedData.tags.split(',').map(t=>t.trim()).filter(t=>t):Array.isArray(updatedData.tags)?updatedData.tags:[],dateAdded:item.dateAdded}:item));if(supabaseClient){try{const{error}=await supabaseClient.from('research').update(updated).eq('id',id);if(error){console.error('Supabase update error:',error);throw error;}await loadResearchFromSupabase();}catch(error){console.error('Error updating research in Supabase:',error);}}setEditingResearch(null);};const findRelevantResearch=function(text){let maxResults=arguments.length>1&&arguments[1]!==undefined?arguments[1]:5;const lowerText=text.toLowerCase();const searchTerms=lowerText.split(' ').filter(term=>term.length>2);const scoredResearch=researchDatabase.map(item=>{let score=0;const itemText=`${item.topic} ${item.findings} ${item.data} ${Array.isArray(item.tags)?item.tags.join(' '):''}`.toLowerCase();if(itemText.includes(lowerText))score+=10;if(item.topic.toLowerCase().includes(lowerText))score+=8;if(Array.isArray(item.tags)){item.tags.forEach(tag=>{if(lowerText.includes(tag.toLowerCase())||tag.toLowerCase().includes(lowerText)){score+=6;}});}searchTerms.forEach(term=>{if(itemText.includes(term))score+=2;if(item.topic.toLowerCase().includes(term))score+=3;});const daysSinceAdded=(new Date()-new Date(item.dateAdded))/(1000*60*60*24);if(daysSinceAdded<7)score+=1;if(daysSinceAdded<30)score+=0.5;return{...item,relevanceScore:score};});const sortedByRelevance=scoredResearch.sort((a,b)=>{if(b.relevanceScore!==a.relevanceScore){return b.relevanceScore-a.relevanceScore;}return new Date(b.dateAdded)-new Date(a.dateAdded);});const minItems=Math.min(3,researchDatabase.length);const targetItems=Math.min(maxResults,researchDatabase.length);let finalResults=sortedByRelevance.slice(0,targetItems);if(finalResults.length<minItems&&researchDatabase.length>=minItems){const usedIds=new Set(finalResults.map(item=>item.id));const additionalItems=researchDatabase.filter(item=>!usedIds.has(item.id)).sort((a,b)=>new Date(b.dateAdded)-new Date(a.dateAdded)).slice(0,minItems-finalResults.length);finalResults=[...finalResults,...additionalItems];}if(finalResults.length<minItems&&researchDatabase.length>0){finalResults=researchDatabase.sort((a,b)=>new Date(b.dateAdded)-new Date(a.dateAdded)).slice(0,minItems);}return finalResults;};const handleSendMessage=async messageText=>{if(!messageText||!messageText.trim())return;const text=messageText.trim();const userMessage={id:Date.now(),type:'user',text:text,timestamp:new Date()};setMessages(prev=>[...prev,userMessage]);setIsTyping(true);setSelectedOptions({linkedinPost:0,videoScript:0});try{let creatorStyle=creatorDatabase.find(c=>c.key==='gary-v');const lowerText=text.toLowerCase();for(const creator of creatorDatabase){if(lowerText.includes(creator.name.toLowerCase())||lowerText.includes(creator.key)){creatorStyle=creator;break;}}const relevantResearch=findRelevantResearch(text,5);if(!config.openaiApiKey){throw new Error('Please configure OpenAI API key in settings to generate content');}console.log(`Using ${relevantResearch.length} research items:`,relevantResearch.map(r=>r.topic));// Try cloud document manager first, fallback to OpenAI\nlet content;try{if(backendStatus==='connected'){content=await generateContentWithCloudDocuments(text,creatorStyle,relevantResearch);console.log('Content generated using cloud document manager');}else{throw new Error('Backend not connected');}}catch(cloudError){console.log('Cloud document manager failed, using OpenAI fallback:',cloudError.message);content=await generateContentWithOpenAI(text,creatorStyle,relevantResearch);}setGeneratedContent(content);let responseText=`I've created 2 variations for each content type in ${creatorStyle.name}'s style.`;if(relevantResearch.length>0){responseText+=` I analyzed ${relevantResearch.length} research items: ${relevantResearch.map(r=>r.topic).join(', ')}.`;}if(backendStatus==='connected'){responseText+=` I also searched through your uploaded documents for relevant context.`;}responseText+=` Use the navigation arrows to choose your preferred options.`;const botResponse={id:Date.now()+1,type:'bot',text:responseText,timestamp:new Date()};setMessages(prev=>[...prev,botResponse]);setIsTyping(false);}catch(error){console.error('Error generating response:',error);const fallbackResponse={id:Date.now()+1,type:'bot',text:`Error generating content: ${error.message}. Please check your configuration.`,timestamp:new Date()};setMessages(prev=>[...prev,fallbackResponse]);setIsTyping(false);}};const handleCreatorSelect=creatorKey=>{const creator=creatorDatabase.find(c=>c.key===creatorKey);const message=`Create a ${creator.name} style LinkedIn post using my latest research and uploaded documents`;handleSendMessage(message);};const copyToClipboard=text=>{navigator.clipboard.writeText(text);};// Document Management Functions\nconst handleFileSelect=event=>{const file=event.target.files[0];if(file){setSelectedFile(file);}};const handleUploadDocument=async()=>{if(!selectedFile||!documentManager)return;setIsUploadingDocument(true);try{const result=await documentManager.uploadDocument(selectedFile);console.log('Document uploaded:',result);// Refresh documents list\nconst documents=await documentManager.getDocuments();setCustomDocuments(documents||[]);setSelectedFile(null);const fileInput=document.getElementById('file-input');if(fileInput)fileInput.value='';// Show success message\nconst successMessage={id:Date.now(),type:'bot',text:`âœ… Successfully uploaded \"${result.filename}\" with ${result.chunks_added} chunks. You can now ask questions about this document!`,timestamp:new Date()};setMessages(prev=>[...prev,successMessage]);}catch(error){console.error('Upload failed:',error);const errorMessage={id:Date.now(),type:'bot',text:`âŒ Upload failed: ${error.message}`,timestamp:new Date()};setMessages(prev=>[...prev,errorMessage]);}finally{setIsUploadingDocument(false);}};const handleDeleteDocument=async filename=>{if(!documentManager)return;try{await documentManager.deleteDocument(filename);console.log('Document deleted:',filename);const documents=await documentManager.getDocuments();setCustomDocuments(documents||[]);const successMessage={id:Date.now(),type:'bot',text:`âœ… Successfully deleted \"${filename}\" and updated the search index.`,timestamp:new Date()};setMessages(prev=>[...prev,successMessage]);}catch(error){console.error('Delete failed:',error);const errorMessage={id:Date.now(),type:'bot',text:`âŒ Delete failed: ${error.message}`,timestamp:new Date()};setMessages(prev=>[...prev,errorMessage]);}};const handleCrawlWebsite=async url=>{if(!documentManager||!url)return;try{const result=await documentManager.crawlWebsite(url);console.log('Website crawled:',result);const documents=await documentManager.getDocuments();setCustomDocuments(documents||[]);const successMessage={id:Date.now(),type:'bot',text:`âœ… Successfully crawled and indexed content from \"${url}\". Title: \"${result.title||'Unknown'}\". You can now ask questions about this content!`,timestamp:new Date()};setMessages(prev=>[...prev,successMessage]);}catch(error){console.error('Crawl failed:',error);const errorMessage={id:Date.now(),type:'bot',text:`âŒ Crawl failed: ${error.message}`,timestamp:new Date()};setMessages(prev=>[...prev,errorMessage]);}};const ConfigPanel=()=>/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\",style:{backdropFilter:'blur(4px)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-xl w-11/12 max-w-md shadow-2xl border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-6\",children:\"Configuration\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-blue-900 mb-2\",children:\"Backend Configuration\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800 mb-2\",children:\"Current Backend URL:\"}),/*#__PURE__*/_jsx(\"code\",{className:\"text-xs bg-blue-100 px-2 py-1 rounded text-blue-900 block break-all\",children:BACKEND_CONFIG.url}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-700 mt-2\",children:\"To change this, update BACKEND_CONFIG.url in the code\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"OpenAI API Key\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:config.openaiApiKey,onChange:e=>setConfig(prev=>({...prev,openaiApiKey:e.target.value})),placeholder:\"sk-...\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 transition-colors\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Model\"}),/*#__PURE__*/_jsxs(\"select\",{value:config.model,onChange:e=>setConfig(prev=>({...prev,model:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 transition-colors\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"gpt-4\",children:\"GPT-4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gpt-4-turbo\",children:\"GPT-4 Turbo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gpt-3.5-turbo\",children:\"GPT-3.5 Turbo\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Supabase URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:config.supabaseUrl,onChange:e=>setConfig(prev=>({...prev,supabaseUrl:e.target.value})),placeholder:\"https://your-project.supabase.co\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 transition-colors\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Supabase Anon Key\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:config.supabaseKey,onChange:e=>setConfig(prev=>({...prev,supabaseKey:e.target.value})),placeholder:\"eyJ...\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 transition-colors\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{configStore={...config};setShowConfig(false);},className:\"flex-1 px-4 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowConfig(false),className:\"px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors\",children:\"Cancel\"})]})]})});const ContentDisplay=_ref=>{let{content}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-xl p-6 mt-4 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-6 pb-4 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(Linkedin,{className:\"w-5 h-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-base font-semibold text-gray-900\",children:\"Generated Content\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-semibold text-gray-900 uppercase tracking-wide\",children:[\"LinkedIn Post (Option \",selectedOptions.linkedinPost+1,\" of 2)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedOptions(prev=>({...prev,linkedinPost:prev.linkedinPost===0?1:0})),className:\"p-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedOptions(prev=>({...prev,linkedinPost:prev.linkedinPost===1?0:1})),className:\"p-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(ChevronRight,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>copyToClipboard(content.linkedinPosts[selectedOptions.linkedinPost]),className:\"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors\",children:[/*#__PURE__*/_jsx(Copy,{className:\"w-3.5 h-3.5\"}),\"Copy\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-700 whitespace-pre-line leading-relaxed\",children:content.linkedinPosts&&content.linkedinPosts[selectedOptions.linkedinPost]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Video,{className:\"w-4 h-4\"}),\"Video Script (Option \",selectedOptions.videoScript+1,\" of 2)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedOptions(prev=>({...prev,videoScript:prev.videoScript===0?1:0})),className:\"p-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedOptions(prev=>({...prev,videoScript:prev.videoScript===1?0:1})),className:\"p-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(ChevronRight,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>copyToClipboard(content.videoScripts[selectedOptions.videoScript]),className:\"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors\",children:[/*#__PURE__*/_jsx(Copy,{className:\"w-3.5 h-3.5\"}),\"Copy\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-4 text-xs text-gray-700 whitespace-pre-line leading-relaxed font-mono\",children:content.videoScripts&&content.videoScripts[selectedOptions.videoScript]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3\",children:\"Hashtags\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:content.hashtags&&content.hashtags.map((tag,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium\",children:tag},index))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3\",children:\"Tips\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"text-xs text-gray-600 leading-relaxed space-y-1\",children:content.engagement_tips&&content.engagement_tips.map((tip,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\u2022\"}),tip]},index))})]})]})]});};const ResearchTab=()=>{const[localNewResearch,setLocalNewResearch]=useState({topic:'',findings:'',source:'',data:'',tags:''});const[localSearchTerm,setLocalSearchTerm]=useState('');const handleLocalResearchChange=(field,value)=>{setLocalNewResearch(prev=>({...prev,[field]:value}));};const handleLocalSearchChange=value=>{setLocalSearchTerm(value);};const filteredResearch=researchDatabase.filter(item=>item.topic.toLowerCase().includes(localSearchTerm.toLowerCase())||Array.isArray(item.tags)&&item.tags.some(tag=>tag.toLowerCase().includes(localSearchTerm.toLowerCase())));const handleAddResearch=()=>{if(!localNewResearch.topic.trim())return;const research={topic:localNewResearch.topic,findings:localNewResearch.findings,source:localNewResearch.source,data:localNewResearch.data,tags:localNewResearch.tags.split(',').map(tag=>tag.trim()).filter(tag=>tag).join(','),created_at:new Date().toISOString()};if(supabaseClient){try{supabaseClient.from('research').insert([research]).then(async()=>{await loadResearchFromSupabase();});}catch(error){console.error('Error adding research:',error);setResearchDatabase(prev=>[{...research,id:Date.now(),tags:research.tags.split(',').map(t=>t.trim()),dateAdded:new Date()},...prev]);}}else{setResearchDatabase(prev=>[{...research,id:Date.now(),tags:research.tags.split(',').map(t=>t.trim()),dateAdded:new Date()},...prev]);}setLocalNewResearch({topic:'',findings:'',source:'',data:'',tags:''});};return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Research Database\"}),/*#__PURE__*/_jsx(BackendStatus,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-3 rounded-lg bg-gray-100 border border-gray-200 flex items-center gap-2 text-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-2 h-2 rounded-full ${supabaseClient?'bg-green-500':'bg-red-500'}`}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:supabaseClient?'Connected to Supabase - Research sorted by newest first':'Using local storage - Research sorted by newest first'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-6\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search research...\",value:localSearchTerm,onChange:e=>handleLocalSearchChange(e.target.value),className:\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 shadow-sm border border-gray-200 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Add New Research\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Research Topic\",value:localNewResearch.topic,onChange:e=>handleLocalResearchChange('topic',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Source\",value:localNewResearch.source,onChange:e=>handleLocalResearchChange('source',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Key Findings\",value:localNewResearch.findings,onChange:e=>handleLocalResearchChange('findings',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\",rows:\"4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Supporting Data/Statistics\",value:localNewResearch.data,onChange:e=>handleLocalResearchChange('data',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\",rows:\"3\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Tags (comma separated)\",value:localNewResearch.tags,onChange:e=>handleLocalResearchChange('tags',e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddResearch,className:\"px-6 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Add Research\"]})]})]}),localNewResearch.topic&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-blue-900 mb-2\",children:\"Preview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm text-blue-800\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Topic:\"}),\" \",localNewResearch.topic]}),localNewResearch.findings&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Findings:\"}),\" \",localNewResearch.findings]}),localNewResearch.source&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Source:\"}),\" \",localNewResearch.source]}),localNewResearch.data&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Data:\"}),\" \",localNewResearch.data]}),localNewResearch.tags&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tags:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",children:localNewResearch.tags.split(',').map((tag,index)=>tag.trim()).filter(tag=>tag).map((tag,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"bg-blue-100 px-2 py-1 rounded text-xs\",children:tag},index))})]})]})]}),isLoadingResearch&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"})}),filteredResearch.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 text-sm text-gray-600\",children:[\"Showing \",filteredResearch.length,\" research item\",filteredResearch.length!==1?'s':'',localSearchTerm&&` matching \"${localSearchTerm}\"`,filteredResearch.length>0&&` (sorted by newest first)`]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[filteredResearch.length===0&&!isLoadingResearch&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-white rounded-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(Database,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:localSearchTerm?`No research found matching \"${localSearchTerm}\"`:'No research found. Add your first research above!'})]}),filteredResearch.map((research,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\",children:editingResearch===research.id?/*#__PURE__*/_jsx(ResearchEditForm,{research:research,onSave:updateResearch,onCancel:()=>setEditingResearch(null)}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:research.topic}),index<3&&/*#__PURE__*/_jsx(\"span\",{className:\"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium\",children:\"Recent\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:research.source}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"Added: \",new Date(research.dateAdded).toLocaleDateString(),\" at \",new Date(research.dateAdded).toLocaleTimeString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingResearch(research.id),className:\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(Edit3,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteResearch(research.id),className:\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-3\",children:research.findings}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-4\",children:research.data}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:(Array.isArray(research.tags)?research.tags:[]).map((tag,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium\",children:tag},index))})]})},research.id))]})]})})});};const ResearchEditForm=_ref2=>{let{research,onSave,onCancel}=_ref2;const[editForm,setEditForm]=useState({topic:research.topic,findings:research.findings,source:research.source,data:research.data,tags:Array.isArray(research.tags)?research.tags.join(', '):research.tags});const handleEditChange=(field,value)=>{setEditForm(prev=>({...prev,[field]:value}));};const handleSave=()=>{onSave(research.id,editForm);};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.topic,onChange:e=>handleEditChange('topic',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.source,onChange:e=>handleEditChange('source',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:editForm.findings,onChange:e=>handleEditChange('findings',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\",rows:\"4\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editForm.data,onChange:e=>handleEditChange('data',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\",rows:\"3\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.tags,onChange:e=>handleEditChange('tags',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\"Save\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onCancel,className:\"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"}),\"Cancel\"]})]})]});};const CreatorTab=()=>{const[localNewCreator,setLocalNewCreator]=useState({name:'',tone:'',structure:'',language:'',length:'',hooks:'',endings:'',characteristics:''});const handleLocalCreatorChange=(field,value)=>{setLocalNewCreator(prev=>({...prev,[field]:value}));};const handleAddCreator=()=>{if(!localNewCreator.name.trim())return;const creator={id:Date.now(),name:localNewCreator.name,key:localNewCreator.name.toLowerCase().replace(/\\s+/g,'-'),icon:UserPlus,style:{tone:localNewCreator.tone,structure:localNewCreator.structure,language:localNewCreator.language,length:localNewCreator.length,hooks:localNewCreator.hooks.split(',').map(h=>h.trim()).filter(h=>h),endings:localNewCreator.endings.split(',').map(e=>e.trim()).filter(e=>e),characteristics:localNewCreator.characteristics}};setCreatorDatabase(prev=>[creator,...prev]);setLocalNewCreator({name:'',tone:'',structure:'',language:'',length:'',hooks:'',endings:'',characteristics:''});};return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Creator Profiles\"}),/*#__PURE__*/_jsx(BackendStatus,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 shadow-sm border border-gray-200 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Add New Creator\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Creator Name\",value:localNewCreator.name,onChange:e=>handleLocalCreatorChange('name',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Tone (e.g., Direct, passionate, no-nonsense)\",value:localNewCreator.tone,onChange:e=>handleLocalCreatorChange('tone',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Post Structure\",value:localNewCreator.structure,onChange:e=>handleLocalCreatorChange('structure',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Language Style\",value:localNewCreator.language,onChange:e=>handleLocalCreatorChange('language',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Typical Post Length\",value:localNewCreator.length,onChange:e=>handleLocalCreatorChange('length',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Common Hooks (comma separated)\",value:localNewCreator.hooks,onChange:e=>handleLocalCreatorChange('hooks',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Common Endings (comma separated)\",value:localNewCreator.endings,onChange:e=>handleLocalCreatorChange('endings',e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Key Characteristics\",value:localNewCreator.characteristics,onChange:e=>handleLocalCreatorChange('characteristics',e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\",rows:\"3\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddCreator,className:\"px-6 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Add Creator\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:creatorDatabase.map(creator=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\",children:editingCreator===creator.id?/*#__PURE__*/_jsx(CreatorEditForm,{creator:creator,onCancel:()=>setEditingCreator(null)}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(creator.icon,{className:\"w-6 h-6 text-gray-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:creator.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingCreator(creator.id),className:\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(Edit3,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCreatorDatabase(prev=>prev.filter(item=>item.id!==creator.id)),className:\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Tone:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-600\",children:creator.style.tone})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Structure:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-600\",children:creator.style.structure})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Language:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-600\",children:creator.style.language})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Characteristics:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-600\",children:creator.style.characteristics})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Common Hooks:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 flex flex-wrap gap-1\",children:creator.style.hooks.map((hook,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"bg-green-100 text-green-800 px-2 py-1 rounded text-xs\",children:hook},index))})]})]})]})},creator.id))})]})})});};const CreatorEditForm=_ref3=>{let{creator,onCancel}=_ref3;const[editForm,setEditForm]=useState({name:creator.name,tone:creator.style.tone,structure:creator.style.structure,language:creator.style.language,length:creator.style.length,hooks:creator.style.hooks.join(', '),endings:creator.style.endings.join(', '),characteristics:creator.style.characteristics});const handleEditChange=(field,value)=>{setEditForm(prev=>({...prev,[field]:value}));};const handleSave=()=>{const updatedData={name:editForm.name,tone:editForm.tone,structure:editForm.structure,language:editForm.language,length:editForm.length,hooks:editForm.hooks.split(',').map(h=>h.trim()).filter(h=>h),endings:editForm.endings.split(',').map(e=>e.trim()).filter(e=>e),characteristics:editForm.characteristics};setCreatorDatabase(prev=>prev.map(c=>c.id===creator.id?{...c,name:updatedData.name,style:{tone:updatedData.tone,structure:updatedData.structure,language:updatedData.language,length:updatedData.length,hooks:updatedData.hooks,endings:updatedData.endings,characteristics:updatedData.characteristics}}:c));onCancel();};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.name,onChange:e=>handleEditChange('name',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.tone,onChange:e=>handleEditChange('tone',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.structure,onChange:e=>handleEditChange('structure',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.language,onChange:e=>handleEditChange('language',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.hooks,onChange:e=>handleEditChange('hooks',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.endings,onChange:e=>handleEditChange('endings',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editForm.characteristics,onChange:e=>handleEditChange('characteristics',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\",rows:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSave,className:\"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\"Save\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onCancel,className:\"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"}),\"Cancel\"]})]})]});};const CustomDocumentsTab=()=>{const[crawlUrl,setCrawlUrl]=useState('');const[isCrawling,setIsCrawling]=useState(false);const handleRefreshDocuments=async()=>{if(!documentManager)return;setIsLoadingDocuments(true);try{await documentManager.refreshIndex();const documents=await documentManager.getDocuments();setCustomDocuments(documents||[]);const successMessage={id:Date.now(),type:'bot',text:`âœ… Successfully refreshed document index. Found ${documents.length} documents.`,timestamp:new Date()};setMessages(prev=>[...prev,successMessage]);}catch(error){console.error('Refresh failed:',error);}finally{setIsLoadingDocuments(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Cloud Document Management\"}),/*#__PURE__*/_jsx(BackendStatus,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 shadow-sm border border-gray-200 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Upload Document\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"file-input\",type:\"file\",accept:\".pdf,.docx,.xlsx,.xls,.pptx,.ppt\",onChange:handleFileSelect,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Supported: PDF, DOCX, XLSX, PPTX files\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUploadDocument,disabled:!selectedFile||isUploadingDocument||backendStatus!=='connected',className:\"px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\",children:isUploadingDocument?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),\"Uploading...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4\"}),\"Upload\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 shadow-sm border border-gray-200 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Crawl Website\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"https://example.com\",value:crawlUrl,onChange:e=>setCrawlUrl(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Extract content from any website for research\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{setIsCrawling(true);try{await handleCrawlWebsite(crawlUrl);setCrawlUrl('');}finally{setIsCrawling(false);}},disabled:!crawlUrl||isCrawling||backendStatus!=='connected',className:\"px-6 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\",children:isCrawling?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),\"Crawling...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Globe,{className:\"w-4 h-4\"}),\"Crawl\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Indexed Documents\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleRefreshDocuments,disabled:isLoadingDocuments||backendStatus!=='connected',className:\"px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 disabled:opacity-50 transition-colors flex items-center gap-2\",children:[isLoadingDocuments?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600\"}):/*#__PURE__*/_jsx(Database,{className:\"w-4 h-4\"}),\"Refresh\"]})]}),isLoadingDocuments?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"})}):customDocuments.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Database,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No documents indexed yet. Upload a document or crawl a website to get started.\"}),backendStatus!=='connected'&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm mt-2\",children:\"Backend connection required for document management.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:customDocuments.map((doc,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:doc.filename}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[doc.total_chunks,\" chunks indexed\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteDocument(doc.filename),className:\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]},doc.filename||index))})]})]})})});};const HistoryTab=()=>/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-6\",children:\"Prompt History\"}),/*#__PURE__*/_jsx(BackendStatus,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[promptHistory.map(entry=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-1\",children:[entry.creator,\" Style\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:entry.timestamp.toLocaleString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyToClipboard(entry.response.linkedinPosts[0]),className:\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(Copy,{className:\"w-4 h-4\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Original Prompt:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-3 rounded-lg text-sm text-gray-700\",children:entry.prompt})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Research Used:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:entry.research.map((topic,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs\",children:topic},index))})]}),entry.backendSources&&entry.backendSources.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Backend Sources Used:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:entry.backendSources.map((source,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"bg-green-100 text-green-800 px-2 py-1 rounded text-xs\",children:source.filename},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Generated Content:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 whitespace-pre-line max-h-40 overflow-y-auto\",children:entry.response.linkedinPosts&&entry.response.linkedinPosts[0]})]})]},entry.id)),promptHistory.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"No prompts generated yet. Start creating content to see your history here.\"})]})]})]})})});const ChatTab=()=>{const[localInputValue,setLocalInputValue]=useState('');const textareaRef=useRef(null);const handleLocalInputChange=e=>{setLocalInputValue(e.target.value);};const handleLocalKeyDown=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();if(localInputValue.trim()){handleSendMessage(localInputValue);setLocalInputValue('');}}};const handleLocalSend=()=>{if(localInputValue.trim()){handleSendMessage(localInputValue);setLocalInputValue('');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border-b border-gray-200 px-6 py-5\",children:[/*#__PURE__*/_jsx(BackendStatus,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3\",children:\"Creator Styles\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-3\",children:creatorDatabase.slice(0,3).map(creator=>{const IconComponent=creator.icon;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleCreatorSelect(creator.key),className:\"flex items-center gap-3 p-3.5 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:transform hover:-translate-y-0.5 hover:shadow-md transition-all text-left\",children:[/*#__PURE__*/_jsx(IconComponent,{className:\"w-4.5 h-4.5 text-gray-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:creator.name})]},creator.key);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('research'),className:\"flex items-center gap-3 p-3.5 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:transform hover:-translate-y-0.5 hover:shadow-md transition-all text-left\",children:[/*#__PURE__*/_jsx(Database,{className:\"w-4.5 h-4.5 text-gray-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Browse Research\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('documents'),className:\"flex items-center gap-3 p-3.5 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:transform hover:-translate-y-0.5 hover:shadow-md transition-all text-left\",children:[/*#__PURE__*/_jsx(FileText,{className:\"w-4.5 h-4.5 text-gray-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Manage Documents\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto px-6 py-6 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[messages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:`flex w-full ${message.type==='user'?'justify-end':'justify-start'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 max-w-3xl\",children:[message.type==='bot'&&/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4 text-gray-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:`px-4 py-3 rounded-lg ${message.type==='user'?'bg-gray-900 text-white':'bg-gray-100 text-gray-900'}`,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm leading-relaxed whitespace-pre-line\",children:message.text}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-2\",children:message.timestamp.toLocaleTimeString()})]}),message.type==='user'&&/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gray-900 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-white\"})})]})},message.id)),generatedContent&&/*#__PURE__*/_jsx(ContentDisplay,{content:generatedContent}),isTyping&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4 text-gray-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 px-4 py-3 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\",style:{animationDelay:'0.1s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\",style:{animationDelay:'0.2s'}})]})})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 px-6 py-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"textarea\",{ref:textareaRef,value:localInputValue,onChange:handleLocalInputChange,onKeyDown:handleLocalKeyDown,placeholder:\"Ask me to create content using your research and uploaded documents...\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\",style:{minHeight:'48px',maxHeight:'128px'},rows:\"1\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLocalSend,disabled:!localInputValue.trim()||isTyping,className:\"px-4 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4\"})})]})})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-64 bg-white border-r border-gray-200 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Linkedin,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-semibold text-gray-900\",children:\"Content Creator\"})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('chat'),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${activeTab==='chat'?'bg-gray-900 text-white':'text-gray-700 hover:bg-gray-100'}`,children:[/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4\"}),\"Chat\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('research'),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${activeTab==='research'?'bg-gray-900 text-white':'text-gray-700 hover:bg-gray-100'}`,children:[/*#__PURE__*/_jsx(Database,{className:\"w-4 h-4\"}),\"Research (\",researchDatabase.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('creators'),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${activeTab==='creators'?'bg-gray-900 text-white':'text-gray-700 hover:bg-gray-100'}`,children:[/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4\"}),\"Creators (\",creatorDatabase.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('documents'),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${activeTab==='documents'?'bg-gray-900 text-white':'text-gray-700 hover:bg-gray-100'}`,children:[/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4\"}),\"Documents (\",customDocuments.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('history'),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${activeTab==='history'?'bg-gray-900 text-white':'text-gray-700 hover:bg-gray-100'}`,children:[/*#__PURE__*/_jsx(BookOpen,{className:\"w-4 h-4\"}),\"History (\",promptHistory.length,\")\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowConfig(true),className:\"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(Settings,{className:\"w-4 h-4\"}),\"Settings\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[activeTab==='chat'&&/*#__PURE__*/_jsx(ChatTab,{}),activeTab==='research'&&/*#__PURE__*/_jsx(ResearchTab,{}),activeTab==='creators'&&/*#__PURE__*/_jsx(CreatorTab,{}),activeTab==='documents'&&/*#__PURE__*/_jsx(CustomDocumentsTab,{}),activeTab==='history'&&/*#__PURE__*/_jsx(HistoryTab,{})]}),showConfig&&/*#__PURE__*/_jsx(ConfigPanel,{})]});};export default LinkedInContentBot;","map":{"version":3,"names":["React","useState","useRef","useEffect","Send","Bot","User","Linkedin","Video","FileText","Database","TrendingUp","Users","Lightbulb","Copy","Settings","Plus","Trash2","Edit3","Save","X","Search","BookOpen","UserPlus","ChevronLeft","ChevronRight","Upload","Globe","AlertCircle","CheckCircle","Clock","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BACKEND_CONFIG","url","createCloudDocumentManager","BACKEND_URL","uploadDocument","file","formData","FormData","append","response","fetch","method","body","ok","errorData","json","catch","Error","detail","status","error","console","getDocuments","deleteDocument","filename","encodeURIComponent","askQuestion","question","headers","JSON","stringify","crawlWebsite","getAllChunks","refreshIndex","healthCheck","configStore","openaiApiKey","model","supabaseUrl","supabaseKey","createSupabaseClient","from","table","select","columns","arguments","length","undefined","data","insert","result","update","eq","column","value","delete","then","LinkedInContentBot","activeTab","setActiveTab","messages","setMessages","id","type","text","timestamp","Date","isTyping","setIsTyping","showConfig","setShowConfig","config","setConfig","generatedContent","setGeneratedContent","selectedOptions","setSelectedOptions","linkedinPost","videoScript","messagesEndRef","backendStatus","setBackendStatus","backendError","setBackendError","researchDatabase","setResearchDatabase","creatorDatabase","setCreatorDatabase","name","key","icon","style","tone","structure","language","hooks","endings","characteristics","promptHistory","setPromptHistory","supabaseClient","setSupabaseClient","documentManager","setDocumentManager","isLoadingResearch","setIsLoadingResearch","customDocuments","setCustomDocuments","isLoadingDocuments","setIsLoadingDocuments","editingResearch","setEditingResearch","editingCreator","setEditingCreator","selectedFile","setSelectedFile","isUploadingDocument","setIsUploadingDocument","testBackendConnection","health","log","includes","documents","message","BackendStatus","className","children","onClick","generateContentWithCloudDocuments","prompt","creatorStyle","relevantResearch","askResult","researchContext","map","r","index","topic","findings","source","dateAdded","toLocaleDateString","relevanceScore","toFixed","join","backendContext","answer","sources","s","sales_followups","concat","client_followups","enhancedPrompt","role","content","temperature","max_tokens","_errorData$error","parse","choices","prev","now","creator","research","backendSources","backendAnswer","generateContentWithOpenAI","systemPrompt","_errorData$error2","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","client","loadResearch","sortedData","item","tags","split","t","trim","created_at","sort","a","b","manager","initializeBackend","docError","loadResearchFromSupabase","deleteResearch","filter","updateResearch","updatedData","updated","tag","Array","isArray","findRelevantResearch","maxResults","lowerText","toLowerCase","searchTerms","term","scoredResearch","score","itemText","forEach","daysSinceAdded","sortedByRelevance","minItems","Math","min","targetItems","finalResults","slice","usedIds","Set","additionalItems","has","handleSendMessage","messageText","userMessage","find","c","cloudError","responseText","botResponse","fallbackResponse","handleCreatorSelect","creatorKey","copyToClipboard","navigator","clipboard","writeText","handleFileSelect","event","target","files","handleUploadDocument","fileInput","document","getElementById","successMessage","chunks_added","errorMessage","handleDeleteDocument","handleCrawlWebsite","title","ConfigPanel","backdropFilter","onChange","e","placeholder","ContentDisplay","_ref","linkedinPosts","videoScripts","hashtags","engagement_tips","tip","ResearchTab","localNewResearch","setLocalNewResearch","localSearchTerm","setLocalSearchTerm","handleLocalResearchChange","field","handleLocalSearchChange","filteredResearch","some","handleAddResearch","toISOString","rows","ResearchEditForm","onSave","onCancel","toLocaleTimeString","_ref2","editForm","setEditForm","handleEditChange","handleSave","CreatorTab","localNewCreator","setLocalNewCreator","handleLocalCreatorChange","handleAddCreator","replace","h","CreatorEditForm","hook","_ref3","CustomDocumentsTab","crawlUrl","setCrawlUrl","isCrawling","setIsCrawling","handleRefreshDocuments","accept","disabled","doc","total_chunks","HistoryTab","entry","toLocaleString","ChatTab","localInputValue","setLocalInputValue","textareaRef","handleLocalInputChange","handleLocalKeyDown","shiftKey","preventDefault","handleLocalSend","IconComponent","animationDelay","ref","onKeyDown","minHeight","maxHeight"],"sources":["/Users/yatins/linkedin-intelligence-system/Linkedin_Bot/linkedin-content-creator/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Send, Bot, User, Linkedin, Video, FileText, Database, TrendingUp, Users, Lightbulb, Copy, Settings, Plus, Trash2, Edit3, Save, X, Search, BookOpen, UserPlus, ChevronLeft, ChevronRight, Upload, Globe, AlertCircle, CheckCircle, Clock } from 'lucide-react';\n\n// ðŸ”§ CONFIGURATION - UPDATE THIS WITH YOUR BACKEND URL\nconst BACKEND_CONFIG = {\n  // ðŸš¨ CHANGE THIS TO YOUR DEPLOYED BACKEND URL\n  url: 'http://localhost:8000', // Replace with your Cloud Run URL\n  \n  // For local development, use: 'http://localhost:8000'\n  // For production, use: 'https://your-service-name-project-id.region.run.app'\n};\n\n// Cloud Document Manager - Updated to match your backend API\nconst createCloudDocumentManager = () => {\n  const BACKEND_URL = BACKEND_CONFIG.url;\n  \n  return {\n    // Upload document to cloud storage\n    uploadDocument: async (file) => {\n      try {\n        const formData = new FormData();\n        formData.append('file', file);\n        \n        const response = await fetch(`${BACKEND_URL}/upload`, {\n          method: 'POST',\n          body: formData\n        });\n        \n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.detail || `Upload failed: ${response.status}`);\n        }\n        \n        return await response.json();\n      } catch (error) {\n        console.error('Cloud upload error:', error);\n        throw error;\n      }\n    },\n\n    // Get all documents from cloud storage\n    getDocuments: async () => {\n      try {\n        const response = await fetch(`${BACKEND_URL}/documents`);\n        \n        if (!response.ok) {\n          throw new Error(`Get documents failed: ${response.status}`);\n        }\n        \n        return await response.json();\n      } catch (error) {\n        console.error('Cloud get documents error:', error);\n        throw error;\n      }\n    },\n\n    // Delete document from cloud storage\n    deleteDocument: async (filename) => {\n      try {\n        const response = await fetch(`${BACKEND_URL}/documents/${encodeURIComponent(filename)}`, {\n          method: 'DELETE'\n        });\n        \n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.detail || `Delete failed: ${response.status}`);\n        }\n        \n        return await response.json();\n      } catch (error) {\n        console.error('Cloud delete error:', error);\n        throw error;\n      }\n    },\n\n    // Ask questions using the backend's /ask endpoint\n    askQuestion: async (question) => {\n      try {\n        const response = await fetch(`${BACKEND_URL}/ask`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ question })\n        });\n        \n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.detail || `Ask failed: ${response.status}`);\n        }\n        \n        return await response.json();\n      } catch (error) {\n        console.error('Cloud ask error:', error);\n        throw error;\n      }\n    },\n\n    // Crawl website and store in cloud\n    crawlWebsite: async (url) => {\n      try {\n        const response = await fetch(`${BACKEND_URL}/crawl`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ url })\n        });\n        \n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.detail || `Crawl failed: ${response.status}`);\n        }\n        \n        return await response.json();\n      } catch (error) {\n        console.error('Cloud crawl error:', error);\n        throw error;\n      }\n    },\n\n    // Get all chunks from backend\n    getAllChunks: async () => {\n      try {\n        const response = await fetch(`${BACKEND_URL}/chunks`);\n        \n        if (!response.ok) {\n          throw new Error(`Get chunks failed: ${response.status}`);\n        }\n        \n        return await response.json();\n      } catch (error) {\n        console.error('Get chunks error:', error);\n        return [];\n      }\n    },\n\n    // Refresh index\n    refreshIndex: async () => {\n      try {\n        const response = await fetch(`${BACKEND_URL}/refresh`, {\n          method: 'POST'\n        });\n        \n        if (!response.ok) {\n          throw new Error(`Refresh failed: ${response.status}`);\n        }\n        \n        return await response.json();\n      } catch (error) {\n        console.error('Refresh error:', error);\n        throw error;\n      }\n    },\n\n    // Health check\n    healthCheck: async () => {\n      try {\n        const response = await fetch(`${BACKEND_URL}/`);\n        return await response.json();\n      } catch (error) {\n        console.error('Health check error:', error);\n        return { status: 'offline' };\n      }\n    }\n  };\n};\n\n// In-memory storage for configuration (instead of localStorage)\nlet configStore = {\n  openaiApiKey: '',\n  model: 'gpt-4',\n  supabaseUrl: '',\n  supabaseKey: ''\n};\n\n// Supabase client initialization\nconst createSupabaseClient = () => {\n  const supabaseUrl = configStore.supabaseUrl || '';\n  const supabaseKey = configStore.supabaseKey || '';\n  \n  if (!supabaseUrl || !supabaseKey) {\n    return null;\n  }\n\n  return {\n    from: (table) => ({\n      select: async (columns = '*') => {\n        try {\n          const response = await fetch(`${supabaseUrl}/rest/v1/${table}?select=${columns}&order=created_at.desc`, {\n            headers: {\n              'apikey': supabaseKey,\n              'Authorization': `Bearer ${supabaseKey}`,\n              'Content-Type': 'application/json',\n              'Prefer': 'return=representation'\n            }\n          });\n          const data = await response.json();\n          return { data, error: null };\n        } catch (error) {\n          return { data: null, error };\n        }\n      },\n      insert: async (data) => {\n        try {\n          const response = await fetch(`${supabaseUrl}/rest/v1/${table}`, {\n            method: 'POST',\n            headers: {\n              'apikey': supabaseKey,\n              'Authorization': `Bearer ${supabaseKey}`,\n              'Content-Type': 'application/json',\n              'Prefer': 'return=representation'\n            },\n            body: JSON.stringify(data)\n          });\n          const result = await response.json();\n          return { data: result, error: null };\n        } catch (error) {\n          return { data: null, error };\n        }\n      },\n      update: async (data) => ({\n        eq: async (column, value) => {\n          try {\n            const response = await fetch(`${supabaseUrl}/rest/v1/${table}?${column}=eq.${value}`, {\n              method: 'PATCH',\n              headers: {\n                'apikey': supabaseKey,\n                'Authorization': `Bearer ${supabaseKey}`,\n                'Content-Type': 'application/json',\n                'Prefer': 'return=representation'\n              },\n              body: JSON.stringify(data)\n            });\n            \n            if (!response.ok) {\n              const errorData = await response.json();\n              return { data: null, error: errorData };\n            }\n            \n            const result = await response.json();\n            return { data: result, error: null };\n          } catch (error) {\n            return { data: null, error };\n          }\n        }\n      }),\n      delete: async () => ({\n        eq: (column, value) => {\n          return fetch(`${supabaseUrl}/rest/v1/${table}?${column}=eq.${value}`, {\n            method: 'DELETE',\n            headers: {\n              'apikey': supabaseKey,\n              'Authorization': `Bearer ${supabaseKey}`,\n              'Content-Type': 'application/json'\n            }\n          })\n          .then(() => ({ data: null, error: null }))\n          .catch(error => ({ data: null, error }));\n        }\n      })\n    })\n  };\n};\n\nconst LinkedInContentBot = () => {\n  const [activeTab, setActiveTab] = useState('chat');\n  const [messages, setMessages] = useState([\n    {\n      id: 1,\n      type: 'bot',\n      text: \"Welcome to the LinkedIn Content Creator Assistant with Cloud Document Integration! I can now access your uploaded documents and crawled websites to create better content. How can I assist you today?\",\n      timestamp: new Date()\n    }\n  ]);\n\n  const [isTyping, setIsTyping] = useState(false);\n  const [showConfig, setShowConfig] = useState(false);\n  const [config, setConfig] = useState(configStore);\n  const [generatedContent, setGeneratedContent] = useState(null);\n  const [selectedOptions, setSelectedOptions] = useState({\n    linkedinPost: 0,\n    videoScript: 0\n  });\n  const messagesEndRef = useRef(null);\n\n  // Backend connection state\n  const [backendStatus, setBackendStatus] = useState('checking');\n  const [backendError, setBackendError] = useState(null);\n\n  // Database states\n  const [researchDatabase, setResearchDatabase] = useState([]);\n  const [creatorDatabase, setCreatorDatabase] = useState([\n    {\n      id: 1,\n      name: \"Gary Vaynerchuk\",\n      key: \"gary-v\",\n      icon: TrendingUp,\n      style: {\n        tone: 'Direct, passionate, no-nonsense',\n        structure: 'Hook â†’ Personal story â†’ Business insight â†’ Call to action',\n        language: 'Casual, uses \"you guys\", lots of energy',\n        length: 'Medium to long posts',\n        hooks: ['Look...', 'Here\\'s the thing...', 'Real talk...'],\n        endings: ['What do you think?', 'Let me know in the comments', 'DM me your thoughts'],\n        characteristics: 'High energy, direct approach, business-focused, motivational'\n      }\n    },\n    {\n      id: 2,\n      name: \"Simon Sinek\",\n      key: \"simon-sinek\",\n      icon: Users,\n      style: {\n        tone: 'Inspirational, thoughtful, leader-focused',\n        structure: 'Question â†’ Story/Example â†’ Leadership lesson â†’ Reflection',\n        language: 'Professional but warm, thought-provoking',\n        length: 'Medium posts with clear paragraphs',\n        hooks: ['Why is it that...', 'The best leaders...', 'I once worked with...'],\n        endings: ['What would you do?', 'Leadership is a choice', 'The choice is yours'],\n        characteristics: 'Leadership-focused, inspirational, storytelling, thoughtful questions'\n      }\n    },\n    {\n      id: 3,\n      name: \"Seth Godin\",\n      key: \"seth-godin\",\n      icon: Lightbulb,\n      style: {\n        tone: 'Wise, concise, marketing-focused',\n        structure: 'Insight â†’ Brief explanation â†’ Broader implication',\n        language: 'Concise, profound, marketing terminology',\n        length: 'Short, punchy posts',\n        hooks: ['The thing is...', 'Here\\'s what I learned...', 'Marketing is...'],\n        endings: ['Worth considering.', 'Just saying.', 'Think about it.'],\n        characteristics: 'Concise wisdom, marketing insights, thought-provoking, minimal but impactful'\n      }\n    }\n  ]);\n\n  const [promptHistory, setPromptHistory] = useState([]);\n  const [supabaseClient, setSupabaseClient] = useState(null);\n  const [documentManager, setDocumentManager] = useState(null);\n  const [isLoadingResearch, setIsLoadingResearch] = useState(false);\n  const [customDocuments, setCustomDocuments] = useState([]);\n  const [isLoadingDocuments, setIsLoadingDocuments] = useState(false);\n  const [editingResearch, setEditingResearch] = useState(null);\n  const [editingCreator, setEditingCreator] = useState(null);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [isUploadingDocument, setIsUploadingDocument] = useState(false);\n\n  // Test backend connection function\n  const testBackendConnection = async () => {\n    setBackendStatus('checking');\n    setBackendError(null);\n    \n    try {\n      if (!documentManager) {\n        throw new Error('Document manager not initialized');\n      }\n      \n      const health = await documentManager.healthCheck();\n      console.log('Backend health check:', health);\n      \n      if (health.status && health.status.includes('online')) {\n        setBackendStatus('connected');\n        \n        // Load documents after successful connection\n        const documents = await documentManager.getDocuments();\n        setCustomDocuments(documents || []);\n      } else {\n        throw new Error('Backend health check failed');\n      }\n    } catch (error) {\n      console.error('Backend connection failed:', error);\n      setBackendStatus('error');\n      setBackendError(error.message);\n    }\n  };\n\n  // Backend Status Component\n  const BackendStatus = () => (\n    <div className={`p-3 rounded-lg mb-4 flex items-center gap-2 ${\n      backendStatus === 'connected' ? 'bg-green-50 border border-green-200' : \n      backendStatus === 'error' ? 'bg-red-50 border border-red-200' : \n      'bg-yellow-50 border border-yellow-200'\n    }`}>\n      {backendStatus === 'connected' && <CheckCircle className=\"w-4 h-4 text-green-600\" />}\n      {backendStatus === 'error' && <AlertCircle className=\"w-4 h-4 text-red-600\" />}\n      {backendStatus === 'checking' && <Clock className=\"w-4 h-4 text-yellow-600\" />}\n      \n      <div className=\"flex-1\">\n        <p className={`text-sm font-medium ${\n          backendStatus === 'connected' ? 'text-green-800' : \n          backendStatus === 'error' ? 'text-red-800' : \n          'text-yellow-800'\n        }`}>\n          Backend: {backendStatus === 'connected' ? 'Connected' : backendStatus === 'error' ? 'Disconnected' : 'Checking...'}\n        </p>\n        <p className=\"text-xs text-gray-600\">\n          URL: {BACKEND_CONFIG.url}\n        </p>\n        {backendError && (\n          <p className=\"text-xs text-red-600 mt-1\">\n            Error: {backendError}\n          </p>\n        )}\n      </div>\n      \n      {backendStatus === 'error' && (\n        <button\n          onClick={testBackendConnection}\n          className=\"text-xs px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200\"\n        >\n          Retry\n        </button>\n      )}\n    </div>\n  );\n\n  // Enhanced Content Generation with Cloud Document Manager\n  const generateContentWithCloudDocuments = async (prompt, creatorStyle, relevantResearch) => {\n    if (!documentManager) {\n      throw new Error('Document manager not initialized');\n    }\n\n    try {\n      // Use the backend's /ask endpoint to get relevant information\n      const askResult = await documentManager.askQuestion(prompt);\n      \n      // Combine research data with backend search results\n      const researchContext = relevantResearch.map((r, index) => `\n${index + 1}. Topic: ${r.topic}\n   Findings: ${r.findings}\n   Data: ${r.data}\n   Source: ${r.source}\n   Date Added: ${r.dateAdded.toLocaleDateString()}\n   ${r.relevanceScore ? `Relevance Score: ${r.relevanceScore.toFixed(1)}` : ''}\n`).join('\\n');\n\n      // Add backend search results as context\n      const backendContext = askResult.answer ? `\nBackend Document Search Results:\nAnswer: ${askResult.answer}\n\nSources: ${askResult.sources.map(s => s.filename).join(', ')}\n\nFollow-up Suggestions: ${askResult.sales_followups.concat(askResult.client_followups).join(', ')}\n` : '';\n\n      // Create enhanced prompt with both research and backend context\n      const enhancedPrompt = `Create LinkedIn content in the style of ${creatorStyle.name}.\n\nCreator Style:\n- Tone: ${creatorStyle.style.tone}\n- Structure: ${creatorStyle.style.structure}\n- Language: ${creatorStyle.style.language}\n- Length: ${creatorStyle.style.length}\n- Common hooks: ${creatorStyle.style.hooks.join(', ')}\n- Common endings: ${creatorStyle.style.endings.join(', ')}\n- Key characteristics: ${creatorStyle.style.characteristics}\n\nResearch Context:\n${researchContext}\n\n${backendContext}\n\nCRITICAL INSTRUCTION: Use information from ALL ${relevantResearch.length} research items and the backend search results provided above. Combine insights from multiple sources and reference specific data points.\n\nUser Request: ${prompt}\n\nCreate TWO DIFFERENT variations each for LinkedIn posts and video scripts. Return in JSON format:\n{\n  \"linkedinPosts\": [\"first post variation\", \"second post variation\"],\n  \"videoScripts\": [\"first video script variation\", \"second video script variation\"],\n  \"hashtags\": [\"array\", \"of\", \"hashtags\"],\n  \"engagement_tips\": [\"array\", \"of\", \"tips\"]\n}`;\n\n      // Use OpenAI with enhanced context\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${config.openaiApiKey}`\n        },\n        body: JSON.stringify({\n          model: config.model,\n          messages: [\n            { role: 'system', content: enhancedPrompt },\n            { role: 'user', content: prompt }\n          ],\n          temperature: 0.8,\n          max_tokens: 3000\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`OpenAI API error: ${errorData.error?.message || response.status}`);\n      }\n\n      const data = await response.json();\n      const content = JSON.parse(data.choices[0].message.content);\n      \n      // Save prompt to history with backend sources\n      setPromptHistory(prev => [{\n        id: Date.now(),\n        prompt,\n        creator: creatorStyle.name,\n        research: relevantResearch.map(r => r.topic),\n        timestamp: new Date(),\n        response: content,\n        backendSources: askResult.sources || [],\n        backendAnswer: askResult.answer || null\n      }, ...prev]);\n\n      return content;\n    } catch (error) {\n      console.error('Enhanced content generation error:', error);\n      throw error;\n    }\n  };\n\n  // OpenAI Integration for multiple variations (fallback)\n  const generateContentWithOpenAI = async (prompt, creatorStyle, relevantResearch) => {\n    if (!config.openaiApiKey) {\n      throw new Error('OpenAI API key not configured');\n    }\n\n    const systemPrompt = `You are a LinkedIn content creator that mimics the style of ${creatorStyle.name}. \n\nStyle characteristics:\n- Tone: ${creatorStyle.style.tone}\n- Structure: ${creatorStyle.style.structure}\n- Language: ${creatorStyle.style.language}\n- Length: ${creatorStyle.style.length}\n- Common hooks: ${creatorStyle.style.hooks.join(', ')}\n- Common endings: ${creatorStyle.style.endings.join(', ')}\n- Key characteristics: ${creatorStyle.style.characteristics}\n\nResearch data to incorporate (prioritized by relevance and recency):\n${relevantResearch.map((r, index) => `\n${index + 1}. Topic: ${r.topic}\n   Findings: ${r.findings}\n   Data: ${r.data}\n   Source: ${r.source}\n   Date Added: ${r.dateAdded.toLocaleDateString()}\n   ${r.relevanceScore ? `Relevance Score: ${r.relevanceScore.toFixed(1)}` : ''}\n`).join('\\n')}\n\nCRITICAL INSTRUCTION: You MUST use information from ALL ${relevantResearch.length} research items provided above. Do NOT focus on just one research item. Your task is to:\n\n1. COMBINE insights from multiple research sources\n2. Reference specific data points from different research items\n3. Weave together findings from various topics\n4. Create comprehensive content that draws from the full research database\n\nFor each variation, explicitly reference at least 2-3 different research items by topic or source. Make the content richer by connecting insights across multiple research areas.\n\nCreate TWO DIFFERENT variations each for LinkedIn posts and video scripts that incorporate this research data in the creator's authentic style. Make sure each variation is distinct in approach while maintaining the creator's voice.\n\nReturn your response in this JSON format:\n{\n  \"linkedinPosts\": [\"first post variation\", \"second post variation\"],\n  \"videoScripts\": [\"first video script variation\", \"second video script variation\"],\n  \"hashtags\": [\"array\", \"of\", \"hashtags\"],\n  \"engagement_tips\": [\"array\", \"of\", \"tips\"]\n}`;\n\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${config.openaiApiKey}`\n        },\n        body: JSON.stringify({\n          model: config.model,\n          messages: [\n            { role: 'system', content: systemPrompt },\n            { role: 'user', content: prompt }\n          ],\n          temperature: 0.8,\n          max_tokens: 3000\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`OpenAI API error: ${errorData.error?.message || response.status}`);\n      }\n\n      const data = await response.json();\n      const content = JSON.parse(data.choices[0].message.content);\n      \n      // Save prompt to history\n      setPromptHistory(prev => [{\n        id: Date.now(),\n        prompt,\n        creator: creatorStyle.name,\n        research: relevantResearch.map(r => r.topic),\n        timestamp: new Date(),\n        response: content\n      }, ...prev]);\n\n      return content;\n    } catch (error) {\n      console.error('OpenAI API error:', error);\n      throw error;\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Initialize Supabase client\n  useEffect(() => {\n    if (config.supabaseUrl && config.supabaseKey) {\n      const client = createSupabaseClient();\n      setSupabaseClient(client);\n      \n      const loadResearch = async () => {\n        if (!client) return;\n        \n        setIsLoadingResearch(true);\n        try {\n          const { data, error } = await client.from('research').select('*');\n          if (error) throw error;\n          \n          const sortedData = data\n            .map(item => ({\n              ...item,\n              tags: typeof item.tags === 'string' ? item.tags.split(',').map(t => t.trim()) : (item.tags || []),\n              dateAdded: new Date(item.created_at || item.dateAdded)\n            }))\n            .sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));\n          \n          setResearchDatabase(sortedData);\n        } catch (error) {\n          console.error('Error loading research:', error);\n        } finally {\n          setIsLoadingResearch(false);\n        }\n      };\n      loadResearch();\n    }\n  }, [config.supabaseUrl, config.supabaseKey]);\n\n  // Initialize Cloud Document Manager and test connection\n  useEffect(() => {\n    const manager = createCloudDocumentManager();\n    setDocumentManager(manager);\n    \n    // Test backend connection on startup\n    const initializeBackend = async () => {\n      setBackendStatus('checking');\n      setBackendError(null);\n      \n      try {\n        const health = await manager.healthCheck();\n        console.log('Backend health check:', health);\n        \n        if (health.status && health.status.includes('online')) {\n          setBackendStatus('connected');\n          \n          // Load documents after successful connection\n          setIsLoadingDocuments(true);\n          try {\n            const documents = await manager.getDocuments();\n            setCustomDocuments(documents || []);\n          } catch (docError) {\n            console.error('Error loading documents:', docError);\n            setCustomDocuments([]);\n          } finally {\n            setIsLoadingDocuments(false);\n          }\n        } else {\n          throw new Error('Backend health check failed');\n        }\n      } catch (error) {\n        console.error('Backend connection failed:', error);\n        setBackendStatus('error');\n        setBackendError(error.message);\n        setCustomDocuments([]);\n      }\n    };\n    \n    initializeBackend();\n  }, []);\n\n  const loadResearchFromSupabase = async (client = supabaseClient) => {\n    if (!client) return;\n    \n    setIsLoadingResearch(true);\n    try {\n      const { data, error } = await client.from('research').select('*');\n      if (error) throw error;\n      \n      const sortedData = data\n        .map(item => ({\n          ...item,\n          tags: typeof item.tags === 'string' ? item.tags.split(',').map(t => t.trim()) : (item.tags || []),\n          dateAdded: new Date(item.created_at || item.dateAdded)\n        }))\n        .sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));\n      \n      setResearchDatabase(sortedData);\n    } catch (error) {\n      console.error('Error loading research:', error);\n    } finally {\n      setIsLoadingResearch(false);\n    }\n  };\n\n  const deleteResearch = async (id) => {\n    if (supabaseClient) {\n      try {\n        const { error } = await supabaseClient.from('research').delete().eq('id', id);\n        if (error) throw error;\n        \n        await loadResearchFromSupabase();\n      } catch (error) {\n        console.error('Error deleting research:', error);\n        setResearchDatabase(prev => prev.filter(item => item.id !== id));\n      }\n    } else {\n      setResearchDatabase(prev => prev.filter(item => item.id !== id));\n    }\n  };\n\n  const updateResearch = async (id, updatedData) => {\n    const updated = {\n      topic: updatedData.topic,\n      findings: updatedData.findings,\n      source: updatedData.source,\n      data: updatedData.data,\n      tags: typeof updatedData.tags === 'string' \n        ? updatedData.tags.split(',').map(tag => tag.trim()).filter(tag => tag).join(',')\n        : (Array.isArray(updatedData.tags) ? updatedData.tags.join(',') : updatedData.tags)\n    };\n\n    setResearchDatabase(prev => prev.map(item => \n      item.id === id ? { \n        ...item, \n        topic: updatedData.topic,\n        findings: updatedData.findings,\n        source: updatedData.source,\n        data: updatedData.data,\n        tags: typeof updatedData.tags === 'string' \n          ? updatedData.tags.split(',').map(t => t.trim()).filter(t => t)\n          : (Array.isArray(updatedData.tags) ? updatedData.tags : []),\n        dateAdded: item.dateAdded\n      } : item\n    ));\n\n    if (supabaseClient) {\n      try {\n        const { error } = await supabaseClient.from('research').update(updated).eq('id', id);\n        if (error) {\n          console.error('Supabase update error:', error);\n          throw error;\n        }\n        \n        await loadResearchFromSupabase();\n      } catch (error) {\n        console.error('Error updating research in Supabase:', error);\n      }\n    }\n    \n    setEditingResearch(null);\n  };\n\n  const findRelevantResearch = (text, maxResults = 5) => {\n    const lowerText = text.toLowerCase();\n    const searchTerms = lowerText.split(' ').filter(term => term.length > 2);\n    \n    const scoredResearch = researchDatabase.map(item => {\n      let score = 0;\n      const itemText = `${item.topic} ${item.findings} ${item.data} ${(Array.isArray(item.tags) ? item.tags.join(' ') : '')}`.toLowerCase();\n      \n      if (itemText.includes(lowerText)) score += 10;\n      if (item.topic.toLowerCase().includes(lowerText)) score += 8;\n      \n      if (Array.isArray(item.tags)) {\n        item.tags.forEach(tag => {\n          if (lowerText.includes(tag.toLowerCase()) || tag.toLowerCase().includes(lowerText)) {\n            score += 6;\n          }\n        });\n      }\n      \n      searchTerms.forEach(term => {\n        if (itemText.includes(term)) score += 2;\n        if (item.topic.toLowerCase().includes(term)) score += 3;\n      });\n      \n      const daysSinceAdded = (new Date() - new Date(item.dateAdded)) / (1000 * 60 * 60 * 24);\n      if (daysSinceAdded < 7) score += 1;\n      if (daysSinceAdded < 30) score += 0.5;\n      \n      return { ...item, relevanceScore: score };\n    });\n    \n    const sortedByRelevance = scoredResearch\n      .sort((a, b) => {\n        if (b.relevanceScore !== a.relevanceScore) {\n          return b.relevanceScore - a.relevanceScore;\n        }\n        return new Date(b.dateAdded) - new Date(a.dateAdded);\n      });\n    \n    const minItems = Math.min(3, researchDatabase.length);\n    const targetItems = Math.min(maxResults, researchDatabase.length);\n    \n    let finalResults = sortedByRelevance.slice(0, targetItems);\n    \n    if (finalResults.length < minItems && researchDatabase.length >= minItems) {\n      const usedIds = new Set(finalResults.map(item => item.id));\n      const additionalItems = researchDatabase\n        .filter(item => !usedIds.has(item.id))\n        .sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded))\n        .slice(0, minItems - finalResults.length);\n      \n      finalResults = [...finalResults, ...additionalItems];\n    }\n    \n    if (finalResults.length < minItems && researchDatabase.length > 0) {\n      finalResults = researchDatabase\n        .sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded))\n        .slice(0, minItems);\n    }\n    \n    return finalResults;\n  };\n\n  const handleSendMessage = async (messageText) => {\n    if (!messageText || !messageText.trim()) return;\n    const text = messageText.trim();\n\n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      text: text,\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setIsTyping(true);\n    setSelectedOptions({ linkedinPost: 0, videoScript: 0 });\n\n    try {\n      let creatorStyle = creatorDatabase.find(c => c.key === 'gary-v');\n      \n      const lowerText = text.toLowerCase();\n      for (const creator of creatorDatabase) {\n        if (lowerText.includes(creator.name.toLowerCase()) || \n            lowerText.includes(creator.key)) {\n          creatorStyle = creator;\n          break;\n        }\n      }\n\n      const relevantResearch = findRelevantResearch(text, 5);\n\n      if (!config.openaiApiKey) {\n        throw new Error('Please configure OpenAI API key in settings to generate content');\n      }\n\n      console.log(`Using ${relevantResearch.length} research items:`, relevantResearch.map(r => r.topic));\n\n      // Try cloud document manager first, fallback to OpenAI\n      let content;\n      try {\n        if (backendStatus === 'connected') {\n          content = await generateContentWithCloudDocuments(text, creatorStyle, relevantResearch);\n          console.log('Content generated using cloud document manager');\n        } else {\n          throw new Error('Backend not connected');\n        }\n      } catch (cloudError) {\n        console.log('Cloud document manager failed, using OpenAI fallback:', cloudError.message);\n        content = await generateContentWithOpenAI(text, creatorStyle, relevantResearch);\n      }\n\n      setGeneratedContent(content);\n      \n      let responseText = `I've created 2 variations for each content type in ${creatorStyle.name}'s style.`;\n      \n      if (relevantResearch.length > 0) {\n        responseText += ` I analyzed ${relevantResearch.length} research items: ${relevantResearch.map(r => r.topic).join(', ')}.`;\n      }\n      \n      if (backendStatus === 'connected') {\n        responseText += ` I also searched through your uploaded documents for relevant context.`;\n      }\n      \n      responseText += ` Use the navigation arrows to choose your preferred options.`;\n      \n      const botResponse = {\n        id: Date.now() + 1,\n        type: 'bot',\n        text: responseText,\n        timestamp: new Date()\n      };\n      \n      setMessages(prev => [...prev, botResponse]);\n      setIsTyping(false);\n    } catch (error) {\n      console.error('Error generating response:', error);\n      const fallbackResponse = {\n        id: Date.now() + 1,\n        type: 'bot',\n        text: `Error generating content: ${error.message}. Please check your configuration.`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, fallbackResponse]);\n      setIsTyping(false);\n    }\n  };\n\n  const handleCreatorSelect = (creatorKey) => {\n    const creator = creatorDatabase.find(c => c.key === creatorKey);\n    const message = `Create a ${creator.name} style LinkedIn post using my latest research and uploaded documents`;\n    handleSendMessage(message);\n  };\n\n  const copyToClipboard = (text) => {\n    navigator.clipboard.writeText(text);\n  };\n\n  // Document Management Functions\n  const handleFileSelect = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setSelectedFile(file);\n    }\n  };\n\n  const handleUploadDocument = async () => {\n    if (!selectedFile || !documentManager) return;\n\n    setIsUploadingDocument(true);\n    try {\n      const result = await documentManager.uploadDocument(selectedFile);\n      console.log('Document uploaded:', result);\n      \n      // Refresh documents list\n      const documents = await documentManager.getDocuments();\n      setCustomDocuments(documents || []);\n      \n      setSelectedFile(null);\n      const fileInput = document.getElementById('file-input');\n      if (fileInput) fileInput.value = '';\n      \n      // Show success message\n      const successMessage = {\n        id: Date.now(),\n        type: 'bot',\n        text: `âœ… Successfully uploaded \"${result.filename}\" with ${result.chunks_added} chunks. You can now ask questions about this document!`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, successMessage]);\n      \n    } catch (error) {\n      console.error('Upload failed:', error);\n      const errorMessage = {\n        id: Date.now(),\n        type: 'bot',\n        text: `âŒ Upload failed: ${error.message}`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsUploadingDocument(false);\n    }\n  };\n\n  const handleDeleteDocument = async (filename) => {\n    if (!documentManager) return;\n\n    try {\n      await documentManager.deleteDocument(filename);\n      console.log('Document deleted:', filename);\n      \n      const documents = await documentManager.getDocuments();\n      setCustomDocuments(documents || []);\n      \n      const successMessage = {\n        id: Date.now(),\n        type: 'bot',\n        text: `âœ… Successfully deleted \"${filename}\" and updated the search index.`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, successMessage]);\n      \n    } catch (error) {\n      console.error('Delete failed:', error);\n      const errorMessage = {\n        id: Date.now(),\n        type: 'bot',\n        text: `âŒ Delete failed: ${error.message}`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    }\n  };\n\n  const handleCrawlWebsite = async (url) => {\n    if (!documentManager || !url) return;\n\n    try {\n      const result = await documentManager.crawlWebsite(url);\n      console.log('Website crawled:', result);\n      \n      const documents = await documentManager.getDocuments();\n      setCustomDocuments(documents || []);\n      \n      const successMessage = {\n        id: Date.now(),\n        type: 'bot',\n        text: `âœ… Successfully crawled and indexed content from \"${url}\". Title: \"${result.title || 'Unknown'}\". You can now ask questions about this content!`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, successMessage]);\n      \n    } catch (error) {\n      console.error('Crawl failed:', error);\n      const errorMessage = {\n        id: Date.now(),\n        type: 'bot',\n        text: `âŒ Crawl failed: ${error.message}`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    }\n  };\n\n  const ConfigPanel = () => (\n    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\" style={{ backdropFilter: 'blur(4px)' }}>\n      <div className=\"bg-white p-8 rounded-xl w-11/12 max-w-md shadow-2xl border border-gray-200\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Configuration</h3>\n        \n        {/* Backend URL Configuration */}\n        <div className=\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n          <h4 className=\"font-medium text-blue-900 mb-2\">Backend Configuration</h4>\n          <p className=\"text-sm text-blue-800 mb-2\">Current Backend URL:</p>\n          <code className=\"text-xs bg-blue-100 px-2 py-1 rounded text-blue-900 block break-all\">\n            {BACKEND_CONFIG.url}\n          </code>\n          <p className=\"text-xs text-blue-700 mt-2\">\n            To change this, update BACKEND_CONFIG.url in the code\n          </p>\n        </div>\n        \n        <div className=\"mb-6\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            OpenAI API Key\n          </label>\n          <input\n            type=\"password\"\n            value={config.openaiApiKey}\n            onChange={(e) => setConfig(prev => ({ ...prev, openaiApiKey: e.target.value }))}\n            placeholder=\"sk-...\"\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 transition-colors\"\n          />\n        </div>\n\n        <div className=\"mb-6\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Model\n          </label>\n          <select\n            value={config.model}\n            onChange={(e) => setConfig(prev => ({ ...prev, model: e.target.value }))}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 transition-colors\"\n          >\n            <option value=\"gpt-4\">GPT-4</option>\n            <option value=\"gpt-4-turbo\">GPT-4 Turbo</option>\n            <option value=\"gpt-3.5-turbo\">GPT-3.5 Turbo</option>\n          </select>\n        </div>\n\n        <div className=\"mb-6\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Supabase URL\n          </label>\n          <input\n            type=\"text\"\n            value={config.supabaseUrl}\n            onChange={(e) => setConfig(prev => ({ ...prev, supabaseUrl: e.target.value }))}\n            placeholder=\"https://your-project.supabase.co\"\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 transition-colors\"\n          />\n        </div>\n\n        <div className=\"mb-8\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Supabase Anon Key\n          </label>\n          <input\n            type=\"password\"\n            value={config.supabaseKey}\n            onChange={(e) => setConfig(prev => ({ ...prev, supabaseKey: e.target.value }))}\n            placeholder=\"eyJ...\"\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 transition-colors\"\n          />\n        </div>\n\n        <div className=\"flex gap-3\">\n          <button\n            onClick={() => {\n              configStore = { ...config };\n              setShowConfig(false);\n            }}\n            className=\"flex-1 px-4 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors\"\n          >\n            Save\n          </button>\n          <button\n            onClick={() => setShowConfig(false)}\n            className=\"px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors\"\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  const ContentDisplay = ({ content }) => (\n    <div className=\"bg-white border border-gray-200 rounded-xl p-6 mt-4 shadow-sm\">\n      <div className=\"flex items-center gap-2 mb-6 pb-4 border-b border-gray-100\">\n        <Linkedin className=\"w-5 h-5 text-blue-600\" />\n        <h3 className=\"text-base font-semibold text-gray-900\">Generated Content</h3>\n      </div>\n\n      <div className=\"mb-8\">\n        <div className=\"flex justify-between items-center mb-3\">\n          <h4 className=\"text-sm font-semibold text-gray-900 uppercase tracking-wide\">\n            LinkedIn Post (Option {selectedOptions.linkedinPost + 1} of 2)\n          </h4>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => setSelectedOptions(prev => ({ \n                ...prev, \n                linkedinPost: prev.linkedinPost === 0 ? 1 : 0 \n              }))}\n              className=\"p-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors\"\n            >\n              <ChevronLeft className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => setSelectedOptions(prev => ({ \n                ...prev, \n                linkedinPost: prev.linkedinPost === 1 ? 0 : 1 \n              }))}\n              className=\"p-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors\"\n            >\n              <ChevronRight className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => copyToClipboard(content.linkedinPosts[selectedOptions.linkedinPost])}\n              className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors\"\n            >\n              <Copy className=\"w-3.5 h-3.5\" />\n              Copy\n            </button>\n          </div>\n        </div>\n        <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4 text-sm text-gray-700 whitespace-pre-line leading-relaxed\">\n          {content.linkedinPosts && content.linkedinPosts[selectedOptions.linkedinPost]}\n        </div>\n      </div>\n\n      <div className=\"mb-8\">\n        <div className=\"flex justify-between items-center mb-3\">\n          <h4 className=\"text-sm font-semibold text-gray-900 uppercase tracking-wide flex items-center gap-2\">\n            <Video className=\"w-4 h-4\" />\n            Video Script (Option {selectedOptions.videoScript + 1} of 2)\n          </h4>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => setSelectedOptions(prev => ({ \n                ...prev, \n                videoScript: prev.videoScript === 0 ? 1 : 0 \n              }))}\n              className=\"p-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors\"\n            >\n              <ChevronLeft className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => setSelectedOptions(prev => ({ \n                ...prev, \n                videoScript: prev.videoScript === 1 ? 0 : 1 \n              }))}\n              className=\"p-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors\"\n            >\n              <ChevronRight className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => copyToClipboard(content.videoScripts[selectedOptions.videoScript])}\n              className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors\"\n            >\n              <Copy className=\"w-3.5 h-3.5\" />\n              Copy\n            </button>\n          </div>\n        </div>\n        <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4 text-xs text-gray-700 whitespace-pre-line leading-relaxed font-mono\">\n          {content.videoScripts && content.videoScripts[selectedOptions.videoScript]}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div>\n          <h4 className=\"text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3\">\n            Hashtags\n          </h4>\n          <div className=\"flex flex-wrap gap-2\">\n            {content.hashtags && content.hashtags.map((tag, index) => (\n              <span\n                key={index}\n                className=\"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium\"\n              >\n                {tag}\n              </span>\n            ))}\n          </div>\n        </div>\n        <div>\n          <h4 className=\"text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3\">\n            Tips\n          </h4>\n          <ul className=\"text-xs text-gray-600 leading-relaxed space-y-1\">\n            {content.engagement_tips && content.engagement_tips.map((tip, index) => (\n              <li key={index} className=\"flex items-start\">\n                <span className=\"mr-2\">â€¢</span>\n                {tip}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n\n  const ResearchTab = () => {\n    const [localNewResearch, setLocalNewResearch] = useState({\n      topic: '',\n      findings: '',\n      source: '',\n      data: '',\n      tags: ''\n    });\n\n    const [localSearchTerm, setLocalSearchTerm] = useState('');\n\n    const handleLocalResearchChange = (field, value) => {\n      setLocalNewResearch(prev => ({ ...prev, [field]: value }));\n    };\n\n    const handleLocalSearchChange = (value) => {\n      setLocalSearchTerm(value);\n    };\n\n    const filteredResearch = researchDatabase.filter(item =>\n      item.topic.toLowerCase().includes(localSearchTerm.toLowerCase()) ||\n      (Array.isArray(item.tags) && item.tags.some(tag => tag.toLowerCase().includes(localSearchTerm.toLowerCase())))\n    );\n\n    const handleAddResearch = () => {\n      if (!localNewResearch.topic.trim()) return;\n\n      const research = {\n        topic: localNewResearch.topic,\n        findings: localNewResearch.findings,\n        source: localNewResearch.source,\n        data: localNewResearch.data,\n        tags: localNewResearch.tags.split(',').map(tag => tag.trim()).filter(tag => tag).join(','),\n        created_at: new Date().toISOString()\n      };\n\n      if (supabaseClient) {\n        try {\n          supabaseClient.from('research').insert([research]).then(async () => {\n            await loadResearchFromSupabase();\n          });\n        } catch (error) {\n          console.error('Error adding research:', error);\n          setResearchDatabase(prev => [{\n            ...research,\n            id: Date.now(),\n            tags: research.tags.split(',').map(t => t.trim()),\n            dateAdded: new Date()\n          }, ...prev]);\n        }\n      } else {\n        setResearchDatabase(prev => [{\n          ...research,\n          id: Date.now(),\n          tags: research.tags.split(',').map(t => t.trim()),\n          dateAdded: new Date()\n        }, ...prev]);\n      }\n\n      setLocalNewResearch({ topic: '', findings: '', source: '', data: '', tags: '' });\n    };\n\n    return (\n      <div className=\"flex-1 overflow-y-auto bg-gray-50\">\n        <div className=\"p-6\">\n          <div className=\"mb-8\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Research Database</h2>\n            \n            <BackendStatus />\n            \n            <div className=\"mb-6 p-3 rounded-lg bg-gray-100 border border-gray-200 flex items-center gap-2 text-sm\">\n              <div className={`w-2 h-2 rounded-full ${supabaseClient ? 'bg-green-500' : 'bg-red-500'}`}></div>\n              <span className=\"text-gray-600\">\n                {supabaseClient ? 'Connected to Supabase - Research sorted by newest first' : 'Using local storage - Research sorted by newest first'}\n              </span>\n            </div>\n            \n            <div className=\"relative mb-6\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search research...\"\n                value={localSearchTerm}\n                onChange={(e) => handleLocalSearchChange(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n              />\n            </div>\n\n            <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200 mb-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Add New Research</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Research Topic\"\n                  value={localNewResearch.topic}\n                  onChange={(e) => handleLocalResearchChange('topic', e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Source\"\n                  value={localNewResearch.source}\n                  onChange={(e) => handleLocalResearchChange('source', e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n              </div>\n              <div className=\"mb-4\">\n                <textarea\n                  placeholder=\"Key Findings\"\n                  value={localNewResearch.findings}\n                  onChange={(e) => handleLocalResearchChange('findings', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\"\n                  rows=\"4\"\n                />\n              </div>\n              <div className=\"mb-4\">\n                <textarea\n                  placeholder=\"Supporting Data/Statistics\"\n                  value={localNewResearch.data}\n                  onChange={(e) => handleLocalResearchChange('data', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\"\n                  rows=\"3\"\n                />\n              </div>\n              <div className=\"flex gap-4\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Tags (comma separated)\"\n                  value={localNewResearch.tags}\n                  onChange={(e) => handleLocalResearchChange('tags', e.target.value)}\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n                <button\n                  onClick={handleAddResearch}\n                  className=\"px-6 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors flex items-center gap-2\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  Add Research\n                </button>\n              </div>\n            </div>\n\n            {localNewResearch.topic && (\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\n                <h4 className=\"text-sm font-medium text-blue-900 mb-2\">Preview</h4>\n                <div className=\"space-y-2 text-sm text-blue-800\">\n                  <p><strong>Topic:</strong> {localNewResearch.topic}</p>\n                  {localNewResearch.findings && <p><strong>Findings:</strong> {localNewResearch.findings}</p>}\n                  {localNewResearch.source && <p><strong>Source:</strong> {localNewResearch.source}</p>}\n                  {localNewResearch.data && <p><strong>Data:</strong> {localNewResearch.data}</p>}\n                  {localNewResearch.tags && (\n                    <div className=\"flex items-center gap-2\">\n                      <strong>Tags:</strong>\n                      <div className=\"flex flex-wrap gap-1\">\n                        {localNewResearch.tags.split(',').map((tag, index) => tag.trim()).filter(tag => tag).map((tag, index) => (\n                          <span key={index} className=\"bg-blue-100 px-2 py-1 rounded text-xs\">\n                            {tag}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {isLoadingResearch && (\n              <div className=\"flex items-center justify-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n              </div>\n            )}\n\n            {filteredResearch.length > 0 && (\n              <div className=\"mb-4 text-sm text-gray-600\">\n                Showing {filteredResearch.length} research item{filteredResearch.length !== 1 ? 's' : ''} \n                {localSearchTerm && ` matching \"${localSearchTerm}\"`}\n                {filteredResearch.length > 0 && ` (sorted by newest first)`}\n              </div>\n            )}\n\n            <div className=\"space-y-4\">\n              {filteredResearch.length === 0 && !isLoadingResearch && (\n                <div className=\"text-center py-12 bg-white rounded-lg border border-gray-200\">\n                  <Database className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                  <p className=\"text-gray-600\">\n                    {localSearchTerm ? `No research found matching \"${localSearchTerm}\"` : 'No research found. Add your first research above!'}\n                  </p>\n                </div>\n              )}\n              \n              {filteredResearch.map((research, index) => (\n                <div key={research.id} className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\">\n                  {editingResearch === research.id ? (\n                    <ResearchEditForm research={research} onSave={updateResearch} onCancel={() => setEditingResearch(null)} />\n                  ) : (\n                    <div>\n                      <div className=\"flex justify-between items-start mb-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <h3 className=\"text-lg font-medium text-gray-900\">{research.topic}</h3>\n                            {index < 3 && (\n                              <span className=\"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium\">\n                                Recent\n                              </span>\n                            )}\n                          </div>\n                          <p className=\"text-sm text-gray-600 mb-2\">{research.source}</p>\n                          <p className=\"text-xs text-gray-500\">\n                            Added: {new Date(research.dateAdded).toLocaleDateString()} at {new Date(research.dateAdded).toLocaleTimeString()}\n                          </p>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <button\n                            onClick={() => setEditingResearch(research.id)}\n                            className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n                          >\n                            <Edit3 className=\"w-4 h-4\" />\n                          </button>\n                          <button\n                            onClick={() => deleteResearch(research.id)}\n                            className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n                      </div>\n                      <p className=\"text-gray-700 mb-3\">{research.findings}</p>\n                      <p className=\"text-gray-600 text-sm mb-4\">{research.data}</p>\n                      <div className=\"flex flex-wrap gap-2 mb-3\">\n                        {(Array.isArray(research.tags) ? research.tags : []).map((tag, index) => (\n                          <span\n                            key={index}\n                            className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium\"\n                          >\n                            {tag}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const ResearchEditForm = ({ research, onSave, onCancel }) => {\n    const [editForm, setEditForm] = useState({\n      topic: research.topic,\n      findings: research.findings,\n      source: research.source,\n      data: research.data,\n      tags: Array.isArray(research.tags) ? research.tags.join(', ') : research.tags\n    });\n\n    const handleEditChange = (field, value) => {\n      setEditForm(prev => ({ ...prev, [field]: value }));\n    };\n\n    const handleSave = () => {\n      onSave(research.id, editForm);\n    };\n\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <input\n            type=\"text\"\n            value={editForm.topic}\n            onChange={(e) => handleEditChange('topic', e.target.value)}\n            className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n          />\n          <input\n            type=\"text\"\n            value={editForm.source}\n            onChange={(e) => handleEditChange('source', e.target.value)}\n            className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n          />\n        </div>\n        <textarea\n          value={editForm.findings}\n          onChange={(e) => handleEditChange('findings', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\"\n          rows=\"4\"\n        />\n        <textarea\n          value={editForm.data}\n          onChange={(e) => handleEditChange('data', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\"\n          rows=\"3\"\n        />\n        <input\n          type=\"text\"\n          value={editForm.tags}\n          onChange={(e) => handleEditChange('tags', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n        />\n        <div className=\"flex gap-2\">\n          <button\n            onClick={handleSave}\n            className=\"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center gap-2\"\n          >\n            <Save className=\"w-4 h-4\" />\n            Save\n          </button>\n          <button\n            onClick={onCancel}\n            className=\"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors flex items-center gap-2\"\n          >\n            <X className=\"w-4 h-4\" />\n            Cancel\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  const CreatorTab = () => {\n    const [localNewCreator, setLocalNewCreator] = useState({\n      name: '',\n      tone: '',\n      structure: '',\n      language: '',\n      length: '',\n      hooks: '',\n      endings: '',\n      characteristics: ''\n    });\n\n    const handleLocalCreatorChange = (field, value) => {\n      setLocalNewCreator(prev => ({ ...prev, [field]: value }));\n    };\n\n    const handleAddCreator = () => {\n      if (!localNewCreator.name.trim()) return;\n      \n      const creator = {\n        id: Date.now(),\n        name: localNewCreator.name,\n        key: localNewCreator.name.toLowerCase().replace(/\\s+/g, '-'),\n        icon: UserPlus,\n        style: {\n          tone: localNewCreator.tone,\n          structure: localNewCreator.structure,\n          language: localNewCreator.language,\n          length: localNewCreator.length,\n          hooks: localNewCreator.hooks.split(',').map(h => h.trim()).filter(h => h),\n          endings: localNewCreator.endings.split(',').map(e => e.trim()).filter(e => e),\n          characteristics: localNewCreator.characteristics\n        }\n      };\n      \n      setCreatorDatabase(prev => [creator, ...prev]);\n      setLocalNewCreator({ name: '', tone: '', structure: '', language: '', length: '', hooks: '', endings: '', characteristics: '' });\n    };\n\n    return (\n      <div className=\"flex-1 overflow-y-auto bg-gray-50\">\n        <div className=\"p-6\">\n          <div className=\"mb-8\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Creator Profiles</h2>\n            \n            <BackendStatus />\n            \n            <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200 mb-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Add New Creator</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Creator Name\"\n                  value={localNewCreator.name}\n                  onChange={(e) => handleLocalCreatorChange('name', e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Tone (e.g., Direct, passionate, no-nonsense)\"\n                  value={localNewCreator.tone}\n                  onChange={(e) => handleLocalCreatorChange('tone', e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Post Structure\"\n                  value={localNewCreator.structure}\n                  onChange={(e) => handleLocalCreatorChange('structure', e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Language Style\"\n                  value={localNewCreator.language}\n                  onChange={(e) => handleLocalCreatorChange('language', e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n              </div>\n              <div className=\"mb-4\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Typical Post Length\"\n                  value={localNewCreator.length}\n                  onChange={(e) => handleLocalCreatorChange('length', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Common Hooks (comma separated)\"\n                  value={localNewCreator.hooks}\n                  onChange={(e) => handleLocalCreatorChange('hooks', e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Common Endings (comma separated)\"\n                  value={localNewCreator.endings}\n                  onChange={(e) => handleLocalCreatorChange('endings', e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                />\n              </div>\n              <div className=\"flex gap-4\">\n                <textarea\n                  placeholder=\"Key Characteristics\"\n                  value={localNewCreator.characteristics}\n                  onChange={(e) => handleLocalCreatorChange('characteristics', e.target.value)}\n                  className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\"\n                  rows=\"3\"\n                />\n                <button\n                  onClick={handleAddCreator}\n                  className=\"px-6 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors flex items-center gap-2\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  Add Creator\n                </button>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {creatorDatabase.map((creator) => (\n                <div key={creator.id} className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\">\n                  {editingCreator === creator.id ? (\n                    <CreatorEditForm creator={creator} onCancel={() => setEditingCreator(null)} />\n                  ) : (\n                    <div>\n                      <div className=\"flex justify-between items-start mb-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <creator.icon className=\"w-6 h-6 text-gray-600\" />\n                          <h3 className=\"text-lg font-medium text-gray-900\">{creator.name}</h3>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <button\n                            onClick={() => setEditingCreator(creator.id)}\n                            className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n                          >\n                            <Edit3 className=\"w-4 h-4\" />\n                          </button>\n                          <button\n                            onClick={() => setCreatorDatabase(prev => prev.filter(item => item.id !== creator.id))}\n                            className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n                      </div>\n                      <div className=\"space-y-3 text-sm\">\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Tone:</span>\n                          <span className=\"ml-2 text-gray-600\">{creator.style.tone}</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Structure:</span>\n                          <span className=\"ml-2 text-gray-600\">{creator.style.structure}</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Language:</span>\n                          <span className=\"ml-2 text-gray-600\">{creator.style.language}</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Characteristics:</span>\n                          <span className=\"ml-2 text-gray-600\">{creator.style.characteristics}</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Common Hooks:</span>\n                          <div className=\"mt-1 flex flex-wrap gap-1\">\n                            {creator.style.hooks.map((hook, index) => (\n                              <span key={index} className=\"bg-green-100 text-green-800 px-2 py-1 rounded text-xs\">\n                                {hook}\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const CreatorEditForm = ({ creator, onCancel }) => {\n    const [editForm, setEditForm] = useState({\n      name: creator.name,\n      tone: creator.style.tone,\n      structure: creator.style.structure,\n      language: creator.style.language,\n      length: creator.style.length,\n      hooks: creator.style.hooks.join(', '),\n      endings: creator.style.endings.join(', '),\n      characteristics: creator.style.characteristics\n    });\n\n    const handleEditChange = (field, value) => {\n      setEditForm(prev => ({ ...prev, [field]: value }));\n    };\n\n    const handleSave = () => {\n      const updatedData = {\n        name: editForm.name,\n        tone: editForm.tone,\n        structure: editForm.structure,\n        language: editForm.language,\n        length: editForm.length,\n        hooks: editForm.hooks.split(',').map(h => h.trim()).filter(h => h),\n        endings: editForm.endings.split(',').map(e => e.trim()).filter(e => e),\n        characteristics: editForm.characteristics\n      };\n      \n      setCreatorDatabase(prev => prev.map(c => \n        c.id === creator.id \n          ? {\n              ...c,\n              name: updatedData.name,\n              style: {\n                tone: updatedData.tone,\n                structure: updatedData.structure,\n                language: updatedData.language,\n                length: updatedData.length,\n                hooks: updatedData.hooks,\n                endings: updatedData.endings,\n                characteristics: updatedData.characteristics\n              }\n            }\n          : c\n      ));\n      onCancel();\n    };\n\n    return (\n      <div className=\"space-y-4\">\n        <input\n          type=\"text\"\n          value={editForm.name}\n          onChange={(e) => handleEditChange('name', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n        />\n        <input\n          type=\"text\"\n          value={editForm.tone}\n          onChange={(e) => handleEditChange('tone', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n        />\n        <input\n          type=\"text\"\n          value={editForm.structure}\n          onChange={(e) => handleEditChange('structure', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n        />\n        <input\n          type=\"text\"\n          value={editForm.language}\n          onChange={(e) => handleEditChange('language', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n        />\n        <input\n          type=\"text\"\n          value={editForm.hooks}\n          onChange={(e) => handleEditChange('hooks', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n        />\n        <input\n          type=\"text\"\n          value={editForm.endings}\n          onChange={(e) => handleEditChange('endings', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n        />\n        <textarea\n          value={editForm.characteristics}\n          onChange={(e) => handleEditChange('characteristics', e.target.value)}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\"\n          rows=\"3\"\n        />\n        <div className=\"flex gap-2\">\n          <button\n            onClick={handleSave}\n            className=\"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center gap-2\"\n          >\n            <Save className=\"w-4 h-4\" />\n            Save\n          </button>\n          <button\n            onClick={onCancel}\n            className=\"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors flex items-center gap-2\"\n          >\n            <X className=\"w-4 h-4\" />\n            Cancel\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  const CustomDocumentsTab = () => {\n    const [crawlUrl, setCrawlUrl] = useState('');\n    const [isCrawling, setIsCrawling] = useState(false);\n\n    const handleRefreshDocuments = async () => {\n      if (!documentManager) return;\n      \n      setIsLoadingDocuments(true);\n      try {\n        await documentManager.refreshIndex();\n        const documents = await documentManager.getDocuments();\n        setCustomDocuments(documents || []);\n        \n        const successMessage = {\n          id: Date.now(),\n          type: 'bot',\n          text: `âœ… Successfully refreshed document index. Found ${documents.length} documents.`,\n          timestamp: new Date()\n        };\n        setMessages(prev => [...prev, successMessage]);\n      } catch (error) {\n        console.error('Refresh failed:', error);\n      } finally {\n        setIsLoadingDocuments(false);\n      }\n    };\n\n    return (\n      <div className=\"flex-1 overflow-y-auto bg-gray-50\">\n        <div className=\"p-6\">\n          <div className=\"mb-8\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Cloud Document Management</h2>\n            \n            <BackendStatus />\n            \n            <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200 mb-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Upload Document</h3>\n              <div className=\"flex gap-4 items-end\">\n                <div className=\"flex-1\">\n                  <input\n                    id=\"file-input\"\n                    type=\"file\"\n                    accept=\".pdf,.docx,.xlsx,.xls,.pptx,.ppt\"\n                    onChange={handleFileSelect}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Supported: PDF, DOCX, XLSX, PPTX files\n                  </p>\n                </div>\n                <button\n                  onClick={handleUploadDocument}\n                  disabled={!selectedFile || isUploadingDocument || backendStatus !== 'connected'}\n                  className=\"px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n                >\n                  {isUploadingDocument ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                      Uploading...\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"w-4 h-4\" />\n                      Upload\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200 mb-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Crawl Website</h3>\n              <div className=\"flex gap-4 items-end\">\n                <div className=\"flex-1\">\n                  <input\n                    type=\"url\"\n                    placeholder=\"https://example.com\"\n                    value={crawlUrl}\n                    onChange={(e) => setCrawlUrl(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Extract content from any website for research\n                  </p>\n                </div>\n                <button\n                  onClick={async () => {\n                    setIsCrawling(true);\n                    try {\n                      await handleCrawlWebsite(crawlUrl);\n                      setCrawlUrl('');\n                    } finally {\n                      setIsCrawling(false);\n                    }\n                  }}\n                  disabled={!crawlUrl || isCrawling || backendStatus !== 'connected'}\n                  className=\"px-6 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n                >\n                  {isCrawling ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                      Crawling...\n                    </>\n                  ) : (\n                    <>\n                      <Globe className=\"w-4 h-4\" />\n                      Crawl\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Indexed Documents</h3>\n                <button\n                  onClick={handleRefreshDocuments}\n                  disabled={isLoadingDocuments || backendStatus !== 'connected'}\n                  className=\"px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 disabled:opacity-50 transition-colors flex items-center gap-2\"\n                >\n                  {isLoadingDocuments ? (\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600\"></div>\n                  ) : (\n                    <Database className=\"w-4 h-4\" />\n                  )}\n                  Refresh\n                </button>\n              </div>\n              \n              {isLoadingDocuments ? (\n                <div className=\"flex items-center justify-center py-8\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n                </div>\n              ) : customDocuments.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <Database className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                  <p className=\"text-gray-600\">No documents indexed yet. Upload a document or crawl a website to get started.</p>\n                  {backendStatus !== 'connected' && (\n                    <p className=\"text-red-600 text-sm mt-2\">Backend connection required for document management.</p>\n                  )}\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {customDocuments.map((doc, index) => (\n                    <div key={doc.filename || index} className=\"flex justify-between items-center p-4 border border-gray-200 rounded-lg\">\n                      <div>\n                        <h4 className=\"font-medium text-gray-900\">{doc.filename}</h4>\n                        <p className=\"text-sm text-gray-500\">\n                          {doc.total_chunks} chunks indexed\n                        </p>\n                      </div>\n                      <button\n                        onClick={() => handleDeleteDocument(doc.filename)}\n                        className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const HistoryTab = () => (\n    <div className=\"flex-1 overflow-y-auto bg-gray-50\">\n      <div className=\"p-6\">\n        <div className=\"mb-8\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Prompt History</h2>\n          \n          <BackendStatus />\n          \n          <div className=\"space-y-4\">\n            {promptHistory.map((entry) => (\n              <div key={entry.id} className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-1\">{entry.creator} Style</h3>\n                    <p className=\"text-sm text-gray-600\">\n                      {entry.timestamp.toLocaleString()}\n                    </p>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => copyToClipboard(entry.response.linkedinPosts[0])}\n                      className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n                    >\n                      <Copy className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n                \n                <div className=\"mb-4\">\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Original Prompt:</h4>\n                  <div className=\"bg-gray-50 p-3 rounded-lg text-sm text-gray-700\">\n                    {entry.prompt}\n                  </div>\n                </div>\n                \n                <div className=\"mb-4\">\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Research Used:</h4>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {entry.research.map((topic, index) => (\n                      <span key={index} className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs\">\n                        {topic}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n                \n                {entry.backendSources && entry.backendSources.length > 0 && (\n                  <div className=\"mb-4\">\n                    <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Backend Sources Used:</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {entry.backendSources.map((source, index) => (\n                        <span key={index} className=\"bg-green-100 text-green-800 px-2 py-1 rounded text-xs\">\n                          {source.filename}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                \n                <div className=\"border-t pt-4\">\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Generated Content:</h4>\n                  <div className=\"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 whitespace-pre-line max-h-40 overflow-y-auto\">\n                    {entry.response.linkedinPosts && entry.response.linkedinPosts[0]}\n                  </div>\n                </div>\n              </div>\n            ))}\n            \n            {promptHistory.length === 0 && (\n              <div className=\"text-center py-12\">\n                <BookOpen className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-600\">No prompts generated yet. Start creating content to see your history here.</p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const ChatTab = () => {\n    const [localInputValue, setLocalInputValue] = useState('');\n    const textareaRef = useRef(null);\n\n    const handleLocalInputChange = (e) => {\n      setLocalInputValue(e.target.value);\n    };\n\n    const handleLocalKeyDown = (e) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        if (localInputValue.trim()) {\n          handleSendMessage(localInputValue);\n          setLocalInputValue('');\n        }\n      }\n    };\n\n    const handleLocalSend = () => {\n      if (localInputValue.trim()) {\n        handleSendMessage(localInputValue);\n        setLocalInputValue('');\n      }\n    };\n\n    return (\n      <>\n        <div className=\"bg-gray-50 border-b border-gray-200 px-6 py-5\">\n          <BackendStatus />\n          \n          <div className=\"mb-4\">\n            <h3 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3\">\n              Creator Styles\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n              {creatorDatabase.slice(0, 3).map((creator) => {\n                const IconComponent = creator.icon;\n                return (\n                  <button\n                    key={creator.key}\n                    onClick={() => handleCreatorSelect(creator.key)}\n                    className=\"flex items-center gap-3 p-3.5 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:transform hover:-translate-y-0.5 hover:shadow-md transition-all text-left\"\n                  >\n                    <IconComponent className=\"w-4.5 h-4.5 text-gray-600\" />\n                    <span className=\"text-sm font-medium text-gray-700\">{creator.name}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3\">\n              Quick Actions\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n              <button\n                onClick={() => setActiveTab('research')}\n                className=\"flex items-center gap-3 p-3.5 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:transform hover:-translate-y-0.5 hover:shadow-md transition-all text-left\"\n              >\n                <Database className=\"w-4.5 h-4.5 text-gray-600\" />\n                <span className=\"text-sm font-medium text-gray-700\">Browse Research</span>\n              </button>\n              <button\n                onClick={() => setActiveTab('documents')}\n                className=\"flex items-center gap-3 p-3.5 bg-white border border-gray-200 rounded-lg hover:border-gray-300 hover:transform hover:-translate-y-0.5 hover:shadow-md transition-all text-left\"\n              >\n                <FileText className=\"w-4.5 h-4.5 text-gray-600\" />\n                <span className=\"text-sm font-medium text-gray-700\">Manage Documents</span>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto px-6 py-6 bg-white\">\n          <div className=\"space-y-6\">\n            {messages.map((message) => (\n              <div\n                key={message.id}\n                className={`flex w-full ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div className=\"flex items-start gap-3 max-w-3xl\">\n                  {message.type === 'bot' && (\n                    <div className=\"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center\">\n                      <Bot className=\"w-4 h-4 text-gray-600\" />\n                    </div>\n                  )}\n                  <div\n                    className={`px-4 py-3 rounded-lg ${\n                      message.type === 'user'\n                        ? 'bg-gray-900 text-white'\n                        : 'bg-gray-100 text-gray-900'\n                    }`}\n                  >\n                    <p className=\"text-sm leading-relaxed whitespace-pre-line\">{message.text}</p>\n                    <div className=\"text-xs text-gray-500 mt-2\">\n                      {message.timestamp.toLocaleTimeString()}\n                    </div>\n                  </div>\n                  {message.type === 'user' && (\n                    <div className=\"w-8 h-8 bg-gray-900 rounded-lg flex items-center justify-center\">\n                      <User className=\"w-4 h-4 text-white\" />\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n\n            {generatedContent && <ContentDisplay content={generatedContent} />}\n\n            {isTyping && (\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center\">\n                  <Bot className=\"w-4 h-4 text-gray-600\" />\n                </div>\n                <div className=\"bg-gray-100 px-4 py-3 rounded-lg\">\n                  <div className=\"flex items-center gap-1\">\n                    <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\"></div>\n                    <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                    <div className=\"w-2 h-2 bg-gray-500 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div ref={messagesEndRef} />\n          </div>\n        </div>\n\n        <div className=\"border-t border-gray-200 px-6 py-4 bg-white\">\n          <div className=\"flex items-end gap-3\">\n            <div className=\"flex-1\">\n              <textarea\n                ref={textareaRef}\n                value={localInputValue}\n                onChange={handleLocalInputChange}\n                onKeyDown={handleLocalKeyDown}\n                placeholder=\"Ask me to create content using your research and uploaded documents...\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-gray-500 resize-none\"\n                style={{ minHeight: '48px', maxHeight: '128px' }}\n                rows=\"1\"\n              />\n            </div>\n            <button\n              onClick={handleLocalSend}\n              disabled={!localInputValue.trim() || isTyping}\n              className=\"px-4 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              <Send className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      <div className=\"w-64 bg-white border-r border-gray-200 flex flex-col\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center gap-3 mb-6\">\n            <div className=\"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\">\n              <Linkedin className=\"w-4 h-4 text-white\" />\n            </div>\n            <h1 className=\"text-lg font-semibold text-gray-900\">Content Creator</h1>\n          </div>\n          \n          <nav className=\"space-y-2\">\n            <button\n              onClick={() => setActiveTab('chat')}\n              className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${\n                activeTab === 'chat'\n                  ? 'bg-gray-900 text-white'\n                  : 'text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              <Bot className=\"w-4 h-4\" />\n              Chat\n            </button>\n            <button\n              onClick={() => setActiveTab('research')}\n              className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${\n                activeTab === 'research'\n                  ? 'bg-gray-900 text-white'\n                  : 'text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              <Database className=\"w-4 h-4\" />\n              Research ({researchDatabase.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('creators')}\n              className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${\n                activeTab === 'creators'\n                  ? 'bg-gray-900 text-white'\n                  : 'text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              <Users className=\"w-4 h-4\" />\n              Creators ({creatorDatabase.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('documents')}\n              className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${\n                activeTab === 'documents'\n                  ? 'bg-gray-900 text-white'\n                  : 'text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              <Upload className=\"w-4 h-4\" />\n              Documents ({customDocuments.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('history')}\n              className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${\n                activeTab === 'history'\n                  ? 'bg-gray-900 text-white'\n                  : 'text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              <BookOpen className=\"w-4 h-4\" />\n              History ({promptHistory.length})\n            </button>\n          </nav>\n        </div>\n\n        <div className=\"flex-1\"></div>\n\n        <div className=\"p-4 border-t border-gray-200\">\n          <button\n            onClick={() => setShowConfig(true)}\n            className=\"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors\"\n          >\n            <Settings className=\"w-4 h-4\" />\n            Settings\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex flex-col\">\n        {activeTab === 'chat' && <ChatTab />}\n        {activeTab === 'research' && <ResearchTab />}\n        {activeTab === 'creators' && <CreatorTab />}\n        {activeTab === 'documents' && <CustomDocumentsTab />}\n        {activeTab === 'history' && <HistoryTab />}\n      </div>\n\n      {showConfig && <ConfigPanel />}\n    </div>\n  );\n};\n\nexport default LinkedInContentBot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}